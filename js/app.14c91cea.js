(function(e){function t(t){for(var r,i,u=t[0],c=t[1],o=t[2],l=0,d=[];l<u.length;l++)i=u[l],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);p&&p(t);while(d.length)d.shift()();return s.push.apply(s,o||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,i=1;i<n.length;i++){var u=n[i];0!==a[u]&&(r=!1)}r&&(s.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},i={app:0},a={app:0},s=[];function u(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-07709945":"e92e2b3e","chunk-3cf8004f":"9dca1e73","chunk-08795300":"03ad4dc4","chunk-29a77190":"491d4f39","chunk-80568cb8":"cd7b6e23","chunk-322825f8":"c84827fb","chunk-0748fbe2":"5d27a4c8","chunk-2327213a":"6530af51","chunk-79ef2e46":"a1499a59","chunk-105a6bdb":"e441bae7","chunk-5510f89d":"966ea9e7","chunk-23be4c9e":"1e693857","chunk-096a54a4":"cf081012","chunk-37dab494":"3e4fe4c2","chunk-694e3779":"7befb611","chunk-6b8e97f3":"42ea54e7","chunk-6ba4fb42":"e6c481fc","chunk-0db09ee0":"683bb1ba","chunk-c36dd8ca":"4e25588b","chunk-ca0a3aa0":"95348f05"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-07709945":1,"chunk-3cf8004f":1,"chunk-08795300":1,"chunk-29a77190":1,"chunk-322825f8":1,"chunk-0748fbe2":1,"chunk-2327213a":1,"chunk-79ef2e46":1,"chunk-105a6bdb":1,"chunk-23be4c9e":1,"chunk-37dab494":1,"chunk-c36dd8ca":1};i[e]?t.push(i[e]):0!==i[e]&&n[e]&&t.push(i[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-07709945":"a3adb0ea","chunk-3cf8004f":"b9d4d794","chunk-08795300":"aea00166","chunk-29a77190":"af984da9","chunk-80568cb8":"31d6cfe0","chunk-322825f8":"ed19af5d","chunk-0748fbe2":"69c65b28","chunk-2327213a":"a57801db","chunk-79ef2e46":"01cf6fd8","chunk-105a6bdb":"da85b7f1","chunk-5510f89d":"31d6cfe0","chunk-23be4c9e":"5e55fdb1","chunk-096a54a4":"31d6cfe0","chunk-37dab494":"545f3559","chunk-694e3779":"31d6cfe0","chunk-6b8e97f3":"31d6cfe0","chunk-6ba4fb42":"31d6cfe0","chunk-0db09ee0":"31d6cfe0","chunk-c36dd8ca":"fef15883","chunk-ca0a3aa0":"31d6cfe0"}[e]+".css",a=c.p+r,s=document.getElementsByTagName("link"),u=0;u<s.length;u++){var o=s[u],l=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(l===r||l===a))return t()}var d=document.getElementsByTagName("style");for(u=0;u<d.length;u++){o=d[u],l=o.getAttribute("data-href");if(l===r||l===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||a,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete i[e],p.parentNode.removeChild(p),n(s)},p.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){i[e]=0})));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=s);var o,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=u(e);var d=new Error;o=function(t){l.onerror=l.onload=null,clearTimeout(p);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",d.name="ChunkLoadError",d.type=r,d.request=i,n[1](d)}a[e]=void 0}};var p=setTimeout((function(){o({type:"timeout",target:l})}),12e4);l.onerror=l.onload=o,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/constellation/",c.oe=function(e){throw console.error(e),e};var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var p=l;s.push([3,"chunk-vendors"]),n()})({0:function(e,t){},"00d0":function(e,t,n){e.exports=n.p+"img/undraw_book_lover_mkck.8ac9c079.svg"},"034f":function(e,t,n){"use strict";n("85ec")},"0957":function(e,t,n){e.exports=n.p+"img/undraw_adventure_map_hnin.6f834259.svg"},"0da4":function(e,t,n){e.exports=n.p+"img/undraw_Projections_re_1mrh.b7febdf6.svg"},1:function(e,t){},10:function(e,t){},11:function(e,t){},"111a":function(e,t,n){e.exports=n.p+"img/தஞ்சாவூர்_பொம்மை_பெண்.b05adbfe.svg"},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},17:function(e,t){},18:function(e,t){},19:function(e,t){},"1a02":function(e,t,n){"use strict";n("07ac");var r=n("2b0e"),i={constr:{unDraw:n("a854"),"வவவ":n("b8fa")},docs:{unDraw:n("00d0"),"வவவ":n("5658")},recherche:{unDraw:n("5664"),"வவவ":n("247d")},profilFemme:{unDraw:n("c034"),"வவவ":n("111a")},profilHomme:{unDraw:n("9426"),"வவவ":n("3276")},automation:{unDraw:n("400c")},"problème":{unDraw:n("6d2a"),"வவவ":n("acd1")},favoris:{unDraw:n("65fe"),"வவவ":n("b91a")},conditions:{unDraw:n("daab"),"வவவ":n("ca1c")},logoBD:{unDraw:n("0da4")},dispositif:{unDraw:n("709d")},vide:{unDraw:n("0957"),"வவவ":n("8c2e")}};t["a"]=r["a"].extend({methods:{image:function(e){var t=this.$store.state.paramètres.thèmeImages,n=this.$store.state.paramètres.thèmeNuit;n&&"வவவ"===t&&(t="unDraw");var r=i[e][t]||Object.values(i[e])[0];return r}}})},2:function(e,t){},20:function(e,t){},21:function(e,t){},22:function(e,t){},23:function(e,t){},24:function(e,t){},"247d":function(e,t,n){e.exports=n.p+"img/மீனவர்கள்.bed2c8f2.svg"},25:function(e,t){},26:function(e,t){},3:function(e,t,n){e.exports=n("cd49")},3276:function(e,t,n){e.exports=n.p+"img/தஞ்சாவூர்_பொம்மை_ஆண்.d4b15d29.svg"},4:function(e,t){},"400c":function(e,t,n){e.exports=n.p+"img/undraw_real-time_sync_o57k.10a054ce.svg"},"482f":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var r="https://github.com/julienmalard/constellation",i="https://github.com/julienmalard/constellation/issues/new/choose",a=r+"/releases",s="https://api.github.com/repos/julienmalard/constellation/releases",u="https://constellation.readthedocs.org"},"4bd7":function(e,t,n){"use strict";var r=n("3835"),i=n("2909"),a=n("5530"),s=(n("99af"),n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("b64b"),n("4e827"),n("caad"),n("2532"),n("4fad"),n("4de4"),n("11b3")),u=n("0745"),c=n("2f62"),o="fr";t["a"]={data:function(){return{orig:o}},computed:Object(a["a"])({langue:function(){return this.$i18n.locale},"languesPréférées":function(){return[this.$i18n.locale].concat(Object(i["a"])(this.$i18n.fallbackLocale))},langues:function(){var e=this,t=Object(i["a"])(new Set([].concat(Object(i["a"])(Object.keys(s["retamabälChabäl"])),Object(i["a"])(Object.keys(this.$i18n.messages)))));return t.sort((function(t,n){return n===e.orig||e.progrès(t)<e.progrès(n)?1:-1}))},languesNuchabal:function(){return Object.keys(s["retamabälChabäl"])}},Object(c["b"])({"systèmeNumération":"paramètres/systèmeNumération"})),methods:{nomDeLangue:s["rubiChabäl"],"chiffreÀTexte":u["உரைக்கு"],"texteÀChiffre":u["எண்ணுக்கு"],"droiteÀGauche":function(e){var t=Object(s["rucholanemTzibanem"])(Object(s["rutzibChabäl"])(e));return Boolean(t&&t.includes("←"))},changerLangue:function(e){this.$i18n.fallbackLocale=[this.$i18n.locale,"fr"],this.$vuetify.lang.current=Object(s["runukChabäl"])(Object(s["rubiChabäl"])(e),"iso"),this.$i18n.locale=e,this.$vuetify.rtl=this.droiteÀGauche(e),this.$store.commit("paramètres/changerLangue",{langue:e})},"progrès":function(e){var t=this.$i18n.messages,n=function e(t,n){for(var a=[],s=0,u=Object.entries(t);s<u.length;s++){var c=Object(r["a"])(u[s],2),o=c[0],l=c[1],d=n?"".concat(n,".").concat(o):o;"string"===typeof l?a.push(d):a=[].concat(Object(i["a"])(a),Object(i["a"])(e(l,d)))}return a},a=n(t[this.orig]),s=new Set(t[e]?n(t[e]):[]),u=a.filter((function(e){return s.has(e)}));return u.length/a.length},"changerNumération":function(e){this.$store.commit("paramètres/changerNumération",{"système":e})},formatterChiffre:function(e){return Object(u["உரைக்கு"])(e,this.systèmeNumération)},formatterDate:function(e){return new Date(e).toLocaleDateString(this.$i18n.locale)}}}},5:function(e,t){},5658:function(e,t,n){e.exports=n.p+"img/சோதிடம்.293e96d5.svg"},5664:function(e,t,n){e.exports=n.p+"img/undraw_not_found_60pq.8c3d2a79.svg"},6:function(e,t){},"65fe":function(e,t,n){e.exports=n.p+"img/undraw_Appreciation_re_p6rl.dcf43010.svg"},"68cb":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-list-item",{on:{click:function(t){return e.$emit("click")}}},[n("v-list-item-action",[e.sélectionnée?n("v-icon",{attrs:{color:"primary"}},[e._v(" mdi-check-bold ")]):e._e()],1),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(e.codeÀNomLangue(e.code)||e.code))])],1),n("v-list-item-action",[1===e.progrès?n("v-icon",{attrs:{color:"primary"}},[e._v("mdi-check-circle")]):n("v-progress-circular",{attrs:{value:100*e.progrès,size:"20",rotate:"270",color:"primary"}})],1)],1)},i=[],a=n("11b3"),s={name:"opsLangue",props:["sélectionnée","progrès","code"],methods:{"codeÀNomLangue":a["rubiChabäl"]}},u=s,c=n("2877"),o=n("6544"),l=n.n(o),d=n("132d"),p=n("da13"),f=n("1800"),h=n("5d23"),m=n("490a"),v=Object(c["a"])(u,r,i,!1,null,null,null);t["a"]=v.exports;l()(v,{VIcon:d["a"],VListItem:p["a"],VListItemAction:f["a"],VListItemContent:h["b"],VListItemTitle:h["d"],VProgressCircular:m["a"]})},"6d2a":function(e,t,n){e.exports=n.p+"img/undraw_towing_6yy4.c3579ab0.svg"},7:function(e,t){},"709d":function(e,t,n){e.exports=n.p+"img/undraw_Mobile_re_q4nk.d2d8f1ac.svg"},8:function(e,t){},"85ec":function(e,t,n){},"8c2e":function(e,t,n){e.exports=n.p+"img/கிணறு.6f784c4f.svg"},"8de5":function(e,t,n){e.exports=n.p+"img/logo-petit.bfd65b87.svg"},9:function(e,t){},9324:function(e){e.exports=JSON.parse('{"fr":{"communs":{"auto":"Automatique","messageInstaller":"La version navigateur de Constellation est limitée par la mémoire disponible dans votre navigateur. Il est préférable d\'installer le logiciel pour toute analyse importante.","btnInstaller":"Installer Constellation","fermer":"Fermer","annuler":"Annuler","sauvegarder":"Sauvegarder"},"alerteConditions":{"texte":"Vous devez accepter les conditions d\'utilisation afin d\'utiliser ce logiciel.","bouton":"Lire les conditions"},"boîteNoms":{"titre":"Ajoutez des noms","sousTitre":"Spécifiez autant que langues que vous voudrez.","étiquetteLangue":"Langue","étiquetteNom":"Nom"},"qualité":{"titre":"Composition du score","sousTitre":"Un meilleur score augmente la confiance que les autres porteront à vos données et favorisera le classement de vos données dans les recherches.","sousTitres":{"accès":"Accessibilité","couverture":"Couverture tests","passe":"Qualité données"}},"nav":{"compte":"Compte","projets":"Mes projets","bd":"Mes bases de données","recherche":"Explorer","favoris":"Mes favoris","automation":"Automation","signalements":"Signaler un problème"},"acceuil":{"entête":"Bienvenue à Constellation","soustitre":"Le système distribué et ouvert pour le partage de données scientifiques.","orientation":"Un peu perdu.e ?","liens":{"docs":"Lire la documentation","recherche":"Trouver des données","projet":"Démarrer un projet"},"contribuerCode":"Contribuer au code"},"compte":{"entête":"Paramètres de compte","onglets":{"compte":{"entête":"Mon compte","info":"Information générale","infoPublique":"Ces informations sont publiques","nom":"Votre nom","aucunNom":"Aucun nom","titreBoîteNoms":"Internationalisez votre nom !","sousTitreBoîteNoms":"Le plus de langues vous ajouterez, le plus de chances que les autres membres de Constellation sauront comment vous appeler.","courriel":"Votre courriel","image":"Votre image de profil","dispositifs":"Dispositifs"},"thème":{"entête":"Thème et langues","couleurs":"Couleurs","langue":"Langue","culture":"Culture"},"réseau":{"entête":"Réseau","équipes":"Équipes","connexions":"Connexions"}},"options":{"thèmeNuit":"Claire/Sombre","thèmeImages":"Thème images","langue":"Langage d\'interface","numération":"Système de numération"}},"projets":{"entête":"Mes projets","filtrer":"Filtrer","nouveau":{"entête":"Nouveau Projet","détails":"Créer un nouveau projet"}},"bd":{"entête":"Mes bases de données","filtrer":"Filtrer","nouvelle":{"entêteCarte":"Nouvelle BD","détailsCarte":"Créer une nouvelle base de données","petitPousset":"Nouvelle BD"},"vis":{"boîteNoms":{"sousTitre":"Le plus de langues le mieux ! Songez à prioriser les langues parlées là d\'où proviennent vos données."},"boîteDescr":{"titre":"Ajoutez des descriptions."}}},"recherche":{"entête":"Explorez les données","soustitre":"Recherchez mots clefs, région géographique, variable..."},"favoris":{"entête":"Mes favoris"},"automation":{"entête":"Automation","soustitre":"Automatisez la mise à jour de vos bases de données"},"signalements":{"entête":"Vous éprouvez des difficultés ?","soustitre":"Dites-nous le et nous vous aiderons.","bouton":"Signaler sur GitHub","boutonCourriel":"Par courriel"},"tableau":{"vide":"Aucune donnée"},"variables":{"catégories":{"numérique":"Numérique","date":"Date","heure":"Heure","dateEtHeure":"Date et heure","chaîne":"Chaîne (text)","catégorique":"Catégorique","géojson":"GéoJSON","vidéo":"Vidéo","audio":"Audio","photo":"Photo","fichier":"Fichier"}},"conditions":{"entête":"Conditions d\'utilisation","jaccepte":"J\'accepte les conditions","retour":"Retour à l\'accueil","p0_1":"Votre utilisation de ce logiciel est assujetie aux conditions suivantes.","p0_2":"Ces conditions ont été écrites par des scientifiques, pas par des avocats. Cela veut aussi dire que vous n\'aurez pas besoin d\'un avocat pour les comprendre. En revanche, s\'il vous plaît utilisez le gros bon sens et n\'essayez pas de jouer sur le sens des mots afin d\'y trouver des échappatoirs.","p0_3":"Ces conditions furent écrites en français. Les traductions dans d\'autres langues sont disponibles grâce aux volontaires de la communauté Constellation. N\'hésitez pas à nous contacter si vous avez des doutes !","t1":"Général","p1_1":"Ce logiciel (Constellation) est distribué en tant que logiciel à source ouverte, sous la [licence AGPL-3.0](https://www.gnu.org/licenses/agpl-3.0.fr.html). Votre utilisation de ce logiciel est assujetie aux conditions de ladite licence. Entre autres, veuillez prendre note que ceci est un logiciel libre qui vient avec **absolument aucune garantie**. *Caballo regalado, no se le mira el colmillo.*","p1_2":"En outre, toute interaction entre utilisateurs ou utilisatrices et assujetie aux [règles de notre communauté](https://www.contributor-covenant.org/fr/version/2/0/code_of_conduct/).","t2":"Utilisation des données","p2_1":"Les données disponibles à travers Constellation ont été contribuées par d\'autres membres de la communauté. Chaque personne, au moment de partager ses données, doit spécifier une licence d\'accès ouvert ; celle-ci est indiquée sur chaque base de données. Soyez toujours conscient de respecter les licences appartenant aux données que vous utilisez.","p2_2":"Ne partagez que des données qui vous appartiennent ou dont vous détenez, de la part de la personne à qui elles appartiennent, la permission écrite de les partager sous la licence que vous y spécifierez. Cela va sans dire, mais ne partagez rien d\'illégal non plus.","p2_3":"Si quelqu\'un d\'autre a partagé des données qui vous appartiennent de manière non conforme aux termes de la licence que vous y aviez appliquée et nous résoudrons le problème.","t3":"Vie privée et sécurité","p3_1":"Veuillez prendre note que Constellation est un réseau distribué, ouvert et publique. Tout ce que vous y partagerez (bases de données, votre nom, information de contact) deviendra accessible à tout le réseau.","p3_2":"Ce qui est vrai de tout système informatique l\'est encore plus dans le contexte d\'un réseau distribué : une fois que de l\'information est partagée avec d\'autres personnes, vous pouvez toujours la supprimer vous-même, mais il est effectivement impossible de forcer les personnes qui l\'ont déjà reçue de la supprimer également (même si vous pouvez toujours leur demander gentillement). **Ne partagez donc que des données que vous voulez partager avec toute la planète Terre. Ne partagez jamais des données confidentielles sur Constellation**.","p3_3":"En revanche, il n\'y a pas de serveur central et vous ne partagez que ce que vous décidez de contribuer. Donc, fini le suivi de vos activités en ligne et de vos données personnelles ! Votre activité d\'utilisation, vos activités et intérêts, demeurent sur votre ordinateur (même si vous utilisez la version Internet de ce logiciel).","t4":"Crédits","p4_1":"Ce logiciel fut développé par Julien Malard.","p4_2":"Les images et l\'art proviennent de [unDraw](https://undraw.co/) et de [வள்ளுவர் வள்ளலார் வட்டம்](https://commons.wikimedia.org/wiki/User:Valluvar_Vallalar_Vattam?uselang=ta). Ces derniers sont disponibles selon la licence [CC BY-SA 4.0](https://creativecommons.org/licenses/by-sa/4.0/deed.fr)."},"téléchargements":{"entête":"Télécharger Constellation"},"licences":{"droits":{"sousTitre":"Droits","aucune":"Aucun droit","partager":"Partager","adapter":"Adapter","usageComercial":"Utilisation commercial","usagePrivé":"Utilisation privée","usageBrevets":"Brevets"},"conditions":{"sousTitre":"Conditions","aucune":"Aucune condition","attribution":"Attribution","partageÉgal":"Même licence","inclureDroitDauteur":"Droit d\'auteur","indiquerChangements":"Indiquer modifications","partagerCodeSource":"Code source","usageRéseau":"Usage réseau compris"},"limitations":{"sousTitre":"Limitations","aucune":"Aucune limitation","aucuneResponsabilité":"Aucune resposabilité","aucuneGarantie":"Aucune garantie","marqueCommerce":"Marques de commerce","brevetExclu":"Brevets","sousLicence":"Sous-licence"},"avertissement":"L\'information ci-dessous n\'est qu\'un résumé de la licence, pourrait contenir des erreurs et n\'est pas un avis légal. Nous vous recommandons vivement de lire la licence en entier.","lire":"Lire la licence","aucunLien":"Aucun lien disponible","info":{"CC-BY-SA-4_0":{"nom":"CC BY SA 4,0","abr":"CC BY SA 4,0","lien":"https://creativecommons.org/licenses/by-sa/4.0/deed.fr"},"CC-BY-4_0":{"nom":"CC BY 4,0","abr":"CC BY 4,0","lien":"https://creativecommons.org/licenses/by/4.0/deed.fr"},"CC-0-1_0":{"nom":"CC 0 1,0","abr":"CC 0 1,0","lien":"https://creativecommons.org/publicdomain/zero/1.0/deed.fr"},"ODbl-1_0":{"nom":"Licence ouverte ODC 1,0","abr":"ODbl 1,0","lien":"https://opendatacommons.org/licenses/odbl/summary/"},"ODC-BY-1_0":{"nom":"Licence attribution ODC 1,0","abr":"ODC BY 1,0","lien":"https://opendatacommons.org/licenses/by/summary"},"PDDL":{"nom":"Domaine publique ODC","abr":"PDDL","lien":"https://opendatacommons.org/licenses/pddl/summary"},"rvca-open":{"nom":"Licence de données ouvertes RCVA","abr":"RVCA","lien":"https://rvcagis.github.io/jkan/datasets/rvca-open-licence/"},"0bsd":{"nom":"BSD Zéro Clause","lien":"https://choosealicense.com/licenses/0bsd/"},"afl-3_0":{"nom":"Licence libre académique","lien":"https://choosealicense.com/licenses/afl-3.0/"},"agpl-3_0":{"nom":"Licence Publique Générale GNU Affero 3,0","lien":"https://choosealicense.com/licenses/agpl-3.0/"},"apache-2_0":{"nom":"Licence Apache 2.0","lien":"https://choosealicense.com/licenses/apache-2.0/"},"artistic-2_0":{"nom":"Licence Artistique 2.0","lien":"https://choosealicense.com/licenses/artistic-2.0/"},"bsd-2-clause":{"nom":"Licence BSD 2-Clause simplifiée","lien":"https://choosealicense.com/licenses/bsd-2-clause/"},"bsd-3-clause-clear":{"nom":"Licence BSD 3-Clause claire","lien":"https://choosealicense.com/licenses/bsd-3-clause-clear/"},"bsd-3-clause":{"nom":"Licence BSD 3-Nouvelle clause","lien":"https://choosealicense.com/licenses/bsd-3-clause/"},"bsd-4-clause":{"nom":"Licence BSD 4-Clause originale","lien":"https://choosealicense.com/licenses/bsd-4-clause/"},"bsl-1_0":{"nom":"Licence de logiciel Boost 1.0","lien":"https://choosealicense.com/licenses/bsl-1.0/"},"cecill-2_1":{"nom":"Licence de logiciel libre CeCILL v2,1","lien":"https://choosealicense.com/licenses/cecill-2.1/"},"ecl-2_0":{"nom":"Licence communauté éducationnelle 2,0","lien":"https://choosealicense.com/licenses/ecl-2.0/"},"epl-1_0":{"nom":"Licence publique Eclipse 1,0","lien":"https://choosealicense.com/licenses/epl-1.0/"},"epl-2_0":{"nom":"Licence publique Eclipse 2,0","lien":"https://choosealicense.com/licenses/epl-2.0/"},"eupl-1_0":{"nom":"Licence publique de l\'Union européenne 1,1","lien":"https://choosealicense.com/licenses/eupl-1.1/"},"eupl-1_2":{"nom":"Licence publique de l\'Union européenne 1,2","lien":"https://choosealicense.com/licenses/eupl-1.2/"},"gpl-2_0":{"nom":"Licence générale publique GNU v2,0","lien":"https://choosealicense.com/licenses/gpl-2.0/"},"gpl-3_0":{"nom":"Licence générale publique GNU v3,0","lien":"https://choosealicense.com/licenses/gpl-3.0/"},"isc":{"nom":"Licence ISC","lien":"https://choosealicense.com/licenses/isc/"},"lgpl-2_1":{"nom":"Licence Générale Publique moindre GNU v2,1","lien":"https://choosealicense.com/licenses/lgpl-2.1/"},"lgpl-3_0":{"nom":"Licence Générale Publique moindre GNU v3,1","lien":"https://choosealicense.com/licenses/lgpl-3.0/"},"lppl-1_3c":{"nom":"Licence publique du projet LaTeX v1,3c","lien":"https://choosealicense.com/licenses/lppl-1.3c/"},"mit-0":{"nom":"MIT sans attribution","lien":"https://choosealicense.com/licenses/mit-0/"},"mit":{"nom":"MIT","lien":"https://choosealicense.com/licenses/mit/"},"mpl-2_0":{"nom":"Licence publique Mozilla 2,0","lien":"https://choosealicense.com/licenses/mpl-2.0/"},"ms-pl":{"nom":"Licence publique Microsoft","lien":"https://choosealicense.com/licenses/ms-pl/"},"ms-rl":{"nom":"Licence réciproque Microsoft","lien":"https://choosealicense.com/licenses/ms-rl/"},"mulanpsl-2_0":{"nom":"Licence logiciel permissive Mulan, version 2","lien":"https://choosealicense.com/licenses/mulanpsl-2.0/"},"ncsa":{"nom":"Licence source ouverte NCSA/Université d\'Illinois","lien":"https://choosealicense.com/licenses/ncsa/"},"osl-3_0":{"nom":"Licence logiciel ouverte 3,0","lien":"https://choosealicense.com/licenses/osl-3.0/"},"postgresql":{"nom":"Licence PostgreSQL","lien":"https://choosealicense.com/licenses/postgresql/"},"unlicence":{"nom":"Domaine publique","lien":"https://choosealicense.com/licenses/unlicense/"},"upl-1_0":{"nom":"Licence permissive universelle 1,0","lien":"https://choosealicense.com/licenses/upl-1.0/"},"vim":{"nom":"Licence VIM","lien":"https://choosealicense.com/licenses/vim/"},"wtfpl":{"nom":"Licence publique WTF","lien":"https://choosealicense.com/licenses/wtfpl/"},"zlib":{"nom":"Licence zlib","lien":"https://choosealicense.com/licenses/zlib/"},"ofl-1_1":{"nom":"Licence de police source ouverte SIL 1,1","lien":"https://choosealicense.com/licenses/ofl-1.1/"},"introuvable":{"nom":"Licence introuvable","abr":"Introuvable"}}}},"kaq":{"acceuil":{"entête":"Ütz ipetik pa Ch\'umil"}},"த":{"nav":{"compte":"கணக்கு","projets":"என் திட்டங்கள்","bd":"என் தரவுத்தளங்கள்","recherche":"ஆராயுங்கள்","favoris":"எனக்கு பிடித்தவை","automation":"தானியங்கல்","signalements":"சிக்கலைப் புகாரளிக்க"},"acceuil":{"entête":"குழாமுக்கு உங்களை வரவேற்கிறோம்","soustitre":"திறந்த அறிவியல் தகவல்களுக்காக ஒரு விநியோகிக்கப்பட்ட வலை."},"compte":{"entête":"கணக்கு அமைப்புகள்"},"signalements":{"entête":"சிரமம் உள்ளதா?"},"conditions":{"entête":"விதிமுறைகள் மற்றும் நிபந்தனைகள்"}},"ار":{"acceuil":{"entête":"خوش آمدید!"}},"ᐃ":{"acceuil":{"entête":"ᑐᙵᓱᒋᑦ ᐊᒋᐊᑦᑖᑦ"}},"हिं":{"acceuil":{"entête":"तारामंडल पर आपका स्वागत हो"}},"বাং":{"acceuil":{"entête":"তারামণ্ডলে আপনাকে স্বাগতম"}},"తె":{"acceuil":{"entête":"మీకు స్నాగతం ఉంది"}},"en":{"alerteConditions":{"texte":"You must accept the terms of use in order to use this software.","bouton":"Read the terms"},"nav":{"compte":"Account","projets":"My projects","bd":"My databases","recherche":"Explore","favoris":"Favourites","signalements":"Report a bug"},"acceuil":{"entête":"Welcome to Constellation","soustitre":"The distributed and open system for scientific data sharing.","orientation":"Feeling lost ?","liens":{"docs":"Read the documentation","recherche":"Find data","projet":"Start a project"}},"compte":{"entête":"Account settings"},"projets":{"entête":"My projects"},"bd":{"entête":"My databases"},"recherche":{"entête":"Explore data"},"favoris":{"entête":"My favourites"},"signalements":{"entête":"Experiencing difficulties?"},"conditions":{"entête":"Terms of use","jaccepte":"I accept the terms","retour":"Return to home"}},"de":{"communs":{"auto":"Automatisch","messageInstaller":"Die Browser-Version von Konstellation wird beschränkt von dem Speicherplatz der von Ihrem Browser zu verfügung gestellt wird. Es ist zu empfehlen das Programm zu installieren um die volle Kapazität nützen zu können.","btnInstaller":"Konstellation installieren"},"alerteConditions":{"texte":"Sie müssen den Nutzunsbestimmungen zustimmen bevor Sie die Software benutzen können.","bouton":"Nutzunsbestimmungen lesen"},"boîteNoms":{"titre":"Namen hinzufügen","sousTitre":"Wählen Sie so viele Sprachen wie Sie möchten.","étiquetteLangue":"Sprache","étiquetteNom":"Name"},"nav":{"compte":"Account","projets":"Meine Projekte","bd":"Meine Datenbanken","recherche":"Entdecken","favoris":"Meine Favoriten","automation":"Automatisierung","signalements":"Problem melden"},"acceuil":{"entête":"Willkommen bei Konstellation","soustitre":"Das dezentralisierte und freie System für den Austausch Wissenschaftlicher Daten.","orientation":"Haben Sie sich verirrt?","liens":{"docs":"Dokumentation Lesen","recherche":"Daten finden","projet":"Neues Projekt anfangen"}},"compte":{"entête":"Account Einstellungen","onglets":{"compte":{"entête":"Mein Account","info":"Generelle Informationen","infoPublique":"Diese Informationen sind öffentlich","nom":"Ihr Name","aucunNom":"Kein Name","titreBoîteNoms":"Internationalisieren Sie ihren Namen!","sousTitreBoîteNoms":"Um so mehr sprachen sie hinzufügen, desto größere Chancen haben Sie das andere Mitglieder von Konstellation Sie bei Ihrem Namen nennen können.","courriel":"Ihre E-mail Adresse","image":"Ihr Profilbild","dispositifs":"Werkzeuge"},"thème":{"entête":"Ambiente und Sprachen","couleurs":"Farben","langue":"Sprache","culture":"Kultur"},"réseau":{"entête":"Forschung","équipes":"Teams","connexions":"Verbindungen"}},"options":{"thèmeNuit":"Hell/Dunkel","thèmeImages":"Hintergrund Bilder","langue":"Sprache","numération":"Zahlensystem"}},"projets":{"entête":"Meine Projekte","filtrer":"Filter","nouveau":{"entête":"Neues Projekt","détails":"Ein neues Projekt anfangen"}},"bd":{"entête":"Meine Datenbanken","filtrer":"Filter","nouvelle":{"entêteCarte":"Neue DB","détailsCarte":"Eine neue Datenbank erstellen","petitPousset":"Neue DB"},"vis":{"boîteNoms":{"sousTitre":"Um so mehr Sprachen desto besser! Versuchen sie Sprachen zu priorisieren die in den Regionen gesprochen werden von denen Ihre Daten stammen."},"boîteDescr":{"titre":"Fügen sie eine beschreibung hinzu."}}},"recherche":{"entête":"Erkunden Sie die Daten","soustitre":"Suchen Sie nach Schlüsselwörtern, geografischer Region, einer Variable ..."},"favoris":{"entête":"Meine Favorieten"},"automation":{"entête":"Automatisierung","soustitre":"Automatisieren Sie die Aktualisierung Ihrer Datenbanken"},"signalements":{"entête":"Haben Sie Schwierigkeiten?","soustitre":"Geben Sie uns Bescheid und wir helfen Ihnen.","bouton":"Mit GitHub berichten","boutonCourriel":"Per E-mail"},"tableau":{"vide":"Keine Daten"},"conditions":{"entête":"Nutzunsbedinungen","jaccepte":"Ich akzeptiere die Nutzungsbedinungen","retour":"Zur Hauptseite zurückkehren","p0_1":"Ihre Verwendung dieser Software unterliegt den folgenden Bedingungen.","p0_2":"Diese Bedinungen wurden von Wissenschaftlern und nicht von Anwälten verfasst. Das bedeutet auch, dass Sie keinen Anwalt brauchen, um sie zu verstehen. Verwenden Sie im Gegenzug den gesunden Menschenverstand und versuchen Sie nicht, mit der Bedeutung von Wörtern zu spielen, um Lücken zu finden.","p0_3":"Diese Bedingungen wurden in französischer Sprache verfasst. Übersetzungen in andere Sprachen sind dank freiwilliger Helfer aus der Constellation-Community möglich. Zögern Sie nicht, uns zu kontaktieren, wenn Sie irgendwelche Zweifel haben !","t1":"Allgemeines","p1_1":"Diese Software (Konstellation) wird als Open Source-Software unter der [AGPL-3.0-Lizenz] (https://www.gnu.org/licenses/agpl-3.0.fr.html) vertrieben. Ihre Nutzung dieser Software unterliegt den Bestimmungen dieser Lizenz. Bitte beachten Sie unter anderem, dass es sich um freie Software handelt, die mit **absolut keinen Garantien** geliefert wird. *Einem geschenkten Gaul schaut man nicht ins Maul*","p1_2":"Darüber hinaus unterliegt jede Interaktion zwischen Benutzern [unseren Community-Regeln] (https://www.contributor-covenant.org/fr/version/2/0/code_of_conduct/).","t2":"Verwendung von Daten","p2_1":"Die über Konstellation verfügbaren Daten wurden von anderen Mitgliedern der Community bereitgestellt. Jede Person muss beim Teilen ihrer Daten eine Open-Access-Lizenz angeben. Jene ist in jeder Datenbank angegeben. Beachten Sie immer die Lizenzen, die zu den von Ihnen verwendeten Daten gehören.","p2_2":"Geben Sie nur Daten weiter, die Ihnen gehören oder von denen Sie im Namen der Person, der sie gehören, eine schriftliche Erlaubnis haben, diese unter der von Ihnen angegebenen Lizenz weiterzugeben. Es versteht sich von selbst, aber teilen Sie auch nichts Illegales.","p2_3":"Wenn jemand anderes Daten, die Ihnen gehören, auf eine Weise freigegeben hat, die nicht den Bedingungen der Lizenz entspricht, die Sie dafür gewählt haben, werden wir (unser möglichstes tun um) das Problem (zu) beheben.","t3":"Privatsphäre und Sicherheit","p3_1":"Bitte beachten Sie, dass Constellation ein dezentralisiertes, freies und öffentliches Netzwerk ist. Alles, was Sie dort teilen (Datenbanken, Ihr Name, Kontaktinformationen), wird für das gesamte Netzwerk zugänglich.","p3_2":"Was für ein Computersystem gilt, gilt umso mehr für ein dezentralisiertes Netzwerk: Sobald Informationen mit anderen Personen geteilt wurden können Sie sie jederzeit selbst löschen. Es ist jedoch unmöglich, Personen, die sie bereits erhalten haben, zum Löschen zu zwingen (obwohl man sie immer nett fragen kann). **Teilen Sie also nur Daten, die Sie mit dem gesamten Planeten Erde teilen möchten. Geben Sie niemals vertrauliche Daten mit Konstellation weiter.**","p3_3":"Es gibt jedoch keinen zentralen Server und Sie teilen nur das, was Sie beitragen möchten. Ihre Online-Aktivitäten und persönlichen Daten werden also nicht weiter verfolgt! Ihre Nutzungsaktivitäten, Aktivitäten und Interessen verbleiben auf Ihrem Computer (auch wenn Sie die Internetversion dieser Software verwenden).","t4":"Credits","p4_1":"Diese Software wurde von Dr. Julien Malard entwickelt.","p4_2":"Bilder und Kunstwerke stammen von [unDraw] (https://undraw.co/) und [வள்ளுவர் வள்ளலார் வட்டம்] (https://commons.wikimedia.org/wiki/User:Valluvar_Vallalar_Vattam?uselang=ta). Diese sind unter der Lizenz [CC BY-SA 4.0] verfügbar (https://creativecommons.org/licenses/by-sa/4.0/deed.fr)."},"licences":{"CC-BY-SA-4_0":{"nom":"CC BY SA 4.0","lien":"https://creativecommons.org/licenses/by-sa/4.0/deed.fr"},"CC-BY-4_0":{"nom":"CC BY 4.0","lien":"https://creativecommons.org/licenses/by/4.0/deed.fr"},"CC-0-1_0":{"nom":"CC 0 1.0","lien":"https://creativecommons.org/publicdomain/zero/1.0/deed.fr"},"ODbl-1_0":{"nom":"ODbl 1.0","lien":"https://opendatacommons.org/licenses/odbl/summary/"},"ODC-BY-1_0":{"nom":"ODC BY 1.0","lien":"https://opendatacommons.org/licenses/by/summary"},"PDDL":{"nom":"PDDL","lien":"https://opendatacommons.org/licenses/pddl/summary"},"introuvable":{"nom":"Lizenz nicht gefunden"}}},"Ch\'orti\'":{"acceuil":{"entête":"Inb\'utz iyo\'pa\'r tama Ek\'"}}}')},9426:function(e,t,n){e.exports=n.p+"img/undraw_male_avatar_323b.0c675689.svg"},9549:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var r=n("53ca"),i=(n("4de4"),n("d81d"),n("caad"),n("2532"),n("c449")),a=n.n(i);function s(e,t){var n=e.règle,i=e.colonne,a=n.typeRègle;switch(a){case"catégorie":return function(t){var r=n.détails.catégorie,a=t.filter((function(e){return!o(e[i],r)}));return a.map((function(t){var n=t.empreinte;return{empreinte:n,colonne:i,erreur:{"règle":e}}}))};case"bornes":var s,u,c=n.détails,l=c.val,d=c.op;switch(d){case">":u=function(e,t){return e>t};break;case"<":u=function(e,t){return e<t};break;case">=":u=function(e,t){return e>=t};break;case"<=":u=function(e,t){return e<=t};break}switch(Object(r["a"])(l)){case"string":s=function(e){return u(e[i],e[t[l]])};break;case"number":s=function(e){return u(e[i],l)};break;default:throw Error("Borne de type ".concat(Object(r["a"])(l)," non reconnue."))}return function(t){var n=t.filter((function(e){return s(e)}));return n.map((function(t){var n=t.empreinte;return{empreinte:n,colonne:i,erreur:{"règle":e}}}))};case"valeurCatégorique":var p=n.détails.options;return function(t){var n=t.filter((function(e){return p.includes(e[i])}));return n.map((function(t){var n=t.empreinte;return{empreinte:n,colonne:i,erreur:{"règle":e}}}))};default:throw Error("Catégorie ".concat(a," inconnue."))}}var u={images:["webp","svg","png","jpg","jpeg","jfif","pjpeg","pjp","gif","avif","apng"],"vidéo":["mp4"],audio:["mp3","ogg","m4a"]};function c(e,t){if("object"!==Object(r["a"])(e))return!1;var n=e.cid,i=e.ext;return!!a.a.isCID(n)&&("string"===typeof i&&(!t||t.includes(i)))}function o(e,t){if(void 0===e)return!0;switch(t){case"numérique":return"number"===typeof e;case"date":return!0;case"heure":return!0;case"dateEtHeure":return!0;case"chaîne":return"string"===typeof e;case"catégorique":return!0;case"booléen":return"boolean"===typeof e;case"géojson":return"object"===Object(r["a"])(e);case"vidéo":return c(e,u.vidéo);case"audio":return c(e,u.audio);case"photo":return c(e,u.images);case"fichier":return c(e);default:return!1}}},"9b19":function(e,t,n){e.exports=n.p+"img/logo.89bb90c3.svg"},a854:function(e,t,n){e.exports=n.p+"img/undraw_under_construction_46pa.37ade1b6.svg"},acd1:function(e,t,n){e.exports=n.p+"img/ஜல்லிக்கட்டு.52584cba.svg"},b8fa:function(e,t,n){e.exports=n.p+"img/குயவர்.d907edbd.svg"},b91a:function(e,t,n){e.exports=n.p+"img/அஞ்சறைப்பெட்டி.7c34341a.svg"},c034:function(e,t,n){e.exports=n.p+"img/undraw_female_avatar_w3jk.31721699.svg"},ca1c:function(e,t,n){e.exports=n.p+"img/கபடி_ஆட்டம்.50b87a85.svg"},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("ops-langue"),n("v-main",[n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view")],1),n("Navigation")],1)],1)},a=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-navigation-drawer",{attrs:{permanent:"",app:"","expand-on-hover":"",right:e.$vuetify.rtl}},[r("v-list",[r("router-link",{attrs:{to:"/"}},[r("v-list-item",{staticClass:"px-2"},[r("v-avatar",[r("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Logo Constellation",contain:"",src:n("8de5"),transition:"scale-transition",width:"40"}})],1)],1)],1)],1),r("v-divider"),r("v-list",{attrs:{nav:"",dense:""}},e._l(e.liens,(function(t){return r("v-list-item",{key:t.texte,attrs:{link:""},on:{click:function(n){e.$router.push({path:"/".concat(t.page)})}}},[r("v-list-item-icon",[r("v-icon",[e._v(" "+e._s(t.icône)+" ")])],1),r("v-list-item-title",[e._v(" "+e._s(e.$t("nav.".concat(t.page)))+" ")])],1)})),1)],1)},u=[],c={name:"Navigation",data:function(){return{liens:[{page:"compte","icône":"mdi-account"},{page:"bd","icône":"mdi-database"},{page:"recherche","icône":"mdi-magnify"},{page:"favoris","icône":"mdi-pin"},{page:"automation","icône":"mdi-sync"},{page:"signalements","icône":"mdi-bug"}]}}},o=c,l=n("2877"),d=n("6544"),p=n.n(d),f=n("8212"),h=n("ce7e"),m=n("132d"),v=n("adda"),b=n("8860"),g=n("da13"),x=n("34c3"),w=n("5d23"),k=n("f774"),y=Object(l["a"])(o,s,u,!1,null,null,null),R=y.exports;p()(y,{VAvatar:f["a"],VDivider:h["a"],VIcon:m["a"],VImg:v["a"],VList:b["a"],VListItem:g["a"],VListItemIcon:x["a"],VListItemTitle:w["d"],VNavigationDrawer:k["a"]});var j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-menu",{attrs:{transition:"slide-y-transition",bottom:"","offset-y":"","offset-x":"","min-width":"225"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({staticClass:"mt-8",attrs:{absolute:"",top:"",right:!e.$vuetify.rtl,left:e.$vuetify.rtl,fab:"",small:""}},r),[n("v-icon",[e._v("mdi-earth")])],1)]}}])},[n("v-list",{staticClass:"overflow-y-auto",staticStyle:{"max-height":"300px"}},e._l(e.langues,(function(t){return n("op-langue",{key:t,attrs:{code:t,"sélectionnée":t===e.langue,"progrès":e.progrès(t)},on:{click:function(n){return e.changerLangue(t)}}})})),1)],1)},B=[],O=n("4bd7"),C=n("68cb"),_={name:"opsLangue",components:{opLangue:C["a"]},mixins:[O["a"]]},D=_,I=n("8336"),L=n("e449"),A=Object(l["a"])(D,j,B,!1,null,null,null),S=A.exports;p()(A,{VBtn:I["a"],VIcon:m["a"],VList:b["a"],VMenu:L["a"]});var P=r["a"].extend({name:"App",components:{Navigation:R,opsLangue:S},data:function(){return{}},mixins:[O["a"]],mounted:function(){var e=this.$store.state.paramètres.langue;e&&this.changerLangue(e);var t=this.$store.state.paramètres.thèmeNuit;this.$vuetify.theme.dark=t}}),M=P,E=(n("034f"),n("7496")),N=n("f6c4"),z=Object(l["a"])(M,i,a,!1,null,null,null),V=z.exports;p()(z,{VApp:E["a"],VMain:N["a"]});var q=n("9483");Object(q["a"])("".concat("/constellation/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("d3b7"),n("3ca3"),n("ddb0");var T=n("8c4f"),$=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"text-center"},[r("v-row",{staticClass:"text-center"},[e.conditionsAcceptées?e._e():r("alerte-conditions"),r("v-col",{attrs:{cols:"12"}},[r("v-img",{staticClass:"my-3",attrs:{src:n("9b19"),contain:"",height:"150"}})],1),r("v-col",{staticClass:"mb-4"},[r("h1",{staticClass:"display-2 font-weight-bold mb-3"},[e._v(" "+e._s(e.$t("acceuil.entête"))+" ")]),r("p",{staticClass:"subheading font-weight-regular"},[e._v(" "+e._s(e.$t("acceuil.soustitre"))+" ")])]),r("v-col",{staticClass:"mb-5",attrs:{cols:"12"}},[r("h2",{staticClass:"headline font-weight-bold mb-5"},[e._v(" "+e._s(e.$t("acceuil.orientation"))+" ")]),r("v-row",{staticClass:"center d-flex justify-space-around"},e._l(e.liens,(function(t,n){return r("v-card",{key:n,staticClass:"ma-5",attrs:{link:"","min-height":"50",width:"250",outlined:"",tile:""},on:{click:function(n){t.page?e.$router.push(t.page):e.ouvrirLien(t.href)}}},[r("v-img",{staticClass:"mx-4 mt-4",attrs:{src:e.image(t.img),contain:""}}),r("v-card-text",[r("p",{staticClass:"text-h6"},[e._v(e._s(e.$t(t.text)))])])],1)})),1)],1),r("v-col",{staticClass:"mb-5",attrs:{cols:"12"}},[r("v-btn",{staticClass:"mx-2",attrs:{color:"primary",tiled:"",outlined:"",small:""},on:{click:function(t){return e.$router.push("/conditions")}}},[e._v(" "+e._s(e.$t("conditions.entête"))+" ")]),r("v-btn",{staticClass:"mx-2",attrs:{color:"primary",tiled:"",outlined:"",small:""},on:{click:function(t){return e.ouvrirLien(e.URL_GIT)}}},[e._v(" "+e._s(e.$t("acceuil.contribuerCode"))+" "),r("v-icon",{attrs:{right:""}},[e._v("mdi-git")])],1),e.isElectron()?e._e():r("v-btn",{staticClass:"mx-2",attrs:{color:"primary",tiled:"",outlined:"",small:""},on:{click:function(t){e.$router.push(encodeURI("/téléchargements"))}}},[e._v(" "+e._s(e.$t("communs.btnInstaller"))+" "),r("v-icon",{attrs:{right:""}},[e._v("mdi-download")])],1)],1)],1),e._e()],1)},F=[],U=n("d4ec"),J=n("262e"),G=n("2caf"),H=(n("99af"),n("63a6")),K=n.n(H),W=n("1b40"),Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-snackbar",{attrs:{outlined:"",color:"warning"},scopedSlots:e._u([{key:"action",fn:function(t){var r=t.attrs;return[n("v-btn",e._b({attrs:{icon:""},on:{click:function(t){e.visible=!1}}},"v-btn",r,!1),[n("v-icon",[e._v("mdi-close")])],1)]}}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v(e._s(e.$t("communs.messageInstaller")))]),n("v-btn",{staticClass:"mb-5",attrs:{color:"warning",tiled:"",outlined:"",small:""},on:{click:function(t){e.$router.push(encodeURI("/téléchargements"))}}},[e._v(" "+e._s(e.$t("communs.btnInstaller"))+" "),n("v-icon",{attrs:{right:""}},[e._v(" mdi-download ")])],1)],1)},Z=[],X=n("d257"),Q={name:"messageInstaller",data:function(){return{visible:!K()()}},methods:{ouvrirLien:X["f"]}},ee=Q,te=n("2db4"),ne=Object(l["a"])(ee,Y,Z,!1,null,null,null),re=ne.exports;p()(ne,{VBtn:I["a"],VIcon:m["a"],VSnackbar:te["a"]});var ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-alert",{staticClass:"text-left mx-auto my-10",attrs:{type:"warning",border:"left",outlined:"","max-width":"650"}},[n("p",[e._v(e._s(e.$t("alerteConditions.texte")))]),n("v-btn",{attrs:{tiled:"",small:"",outlined:"",color:"warning"},on:{click:function(t){return e.$router.push("/conditions")}}},[e._v(" "+e._s(e.$t("alerteConditions.bouton"))+" ")])],1)},ae=[],se={name:"alerteConditions"},ue=se,ce=n("0798"),oe=Object(l["a"])(ue,ie,ae,!1,null,null,null),le=oe.exports;p()(oe,{VAlert:ce["a"],VBtn:I["a"]});var de,pe,fe=n("1a02"),he=n("482f"),me=(de=Object(W["a"])({components:{alerteConditions:le,messageInstaller:re},data:function(){return{URL_GIT:he["c"],liens:[{text:"acceuil.liens.docs",href:"".concat(he["b"],"/").concat(this.$i18n.locale,"/latest"),img:"docs"},{text:"acceuil.liens.recherche",page:"/recherche",img:"recherche"},{text:"acceuil.liens.projet",page:"/projets",img:"constr"}]}},mixins:[fe["a"]],computed:{"conditionsAcceptées":function(){return this.$store.state.conditions.acceptées}},methods:{ouvrirLien:X["f"],isElectron:K.a}}),de(pe=function(e){Object(J["a"])(n,e);var t=Object(G["a"])(n);function n(){return Object(U["a"])(this,n),t.apply(this,arguments)}return n}(W["b"]))||pe),ve=me,be=n("b0af"),ge=n("99d9"),xe=n("62ad"),we=n("a523"),ke=n("0fd9"),ye=Object(l["a"])(ve,$,F,!1,null,null,null),Re=ye.exports;p()(ye,{VBtn:I["a"],VCard:be["a"],VCardText:ge["c"],VCol:xe["a"],VContainer:we["a"],VIcon:m["a"],VImg:v["a"],VRow:ke["a"]}),r["a"].use(T["a"]);var je=[{path:"/",name:"Accueil",component:Re},{path:"/compte",name:"Compte",component:function(){return Promise.all([n.e("chunk-07709945"),n.e("chunk-3cf8004f"),n.e("chunk-80568cb8"),n.e("chunk-322825f8"),n.e("chunk-2327213a")]).then(n.bind(null,"a6c2"))}},{path:"/projets",name:"Projets",component:function(){return Promise.all([n.e("chunk-07709945"),n.e("chunk-5510f89d")]).then(n.bind(null,"2c02"))}},{path:"/bd",name:"Bases de données",component:function(){return Promise.all([n.e("chunk-07709945"),n.e("chunk-79ef2e46"),n.e("chunk-23be4c9e"),n.e("chunk-096a54a4")]).then(n.bind(null,"7a7c"))}},{path:"/bd/nouvelle",component:function(){return Promise.all([n.e("chunk-07709945"),n.e("chunk-3cf8004f"),n.e("chunk-08795300")]).then(n.bind(null,"f9dc"))}},{path:"/bd/visualiser/:id",component:function(){return Promise.all([n.e("chunk-07709945"),n.e("chunk-3cf8004f"),n.e("chunk-80568cb8"),n.e("chunk-79ef2e46"),n.e("chunk-105a6bdb")]).then(n.bind(null,"79fe"))}},{path:"/bd/visualiser/:id/tableau/:idTableau",component:function(){return Promise.all([n.e("chunk-07709945"),n.e("chunk-3cf8004f"),n.e("chunk-80568cb8"),n.e("chunk-322825f8"),n.e("chunk-0748fbe2")]).then(n.bind(null,"f02a"))}},{path:"/recherche",name:"Recherche",component:function(){return Promise.all([n.e("chunk-07709945"),n.e("chunk-80568cb8"),n.e("chunk-79ef2e46"),n.e("chunk-23be4c9e"),n.e("chunk-37dab494")]).then(n.bind(null,"d513"))}},{path:"/favoris",name:"Favoris",component:function(){return Promise.all([n.e("chunk-79ef2e46"),n.e("chunk-23be4c9e"),n.e("chunk-0db09ee0")]).then(n.bind(null,"5f29"))}},{path:"/automation",name:"Automation",component:function(){return n.e("chunk-6ba4fb42").then(n.bind(null,"d837"))}},{path:"/signalements",name:"Signalements",component:function(){return n.e("chunk-6b8e97f3").then(n.bind(null,"309e"))}},{path:"/conditions",name:"Conditions",component:function(){return n.e("chunk-c36dd8ca").then(n.bind(null,"a20b"))}},{path:"*",redirect:"/"},{path:encodeURI("/téléchargements"),name:"Téléchargements",component:function(){return Promise.all([n.e("chunk-07709945"),n.e("chunk-3cf8004f"),n.e("chunk-29a77190")]).then(n.bind(null,"73d1"))}}],Be=new T["a"]({mode:"history",base:"/constellation/",routes:je,scrollBehavior:function(e,t,n){return n||{x:0,y:0}}}),Oe=Be,Ce=n("2f62"),_e=n("bfa9"),De={namespaced:!0,state:{"acceptées":!1},mutations:{accepterConditions:function(e,t){e.acceptées=Boolean(t.acceptées)}},actions:{},modules:{}},Ie=n("11b3"),Le={namespaced:!0,state:{langue:null,"numération":null,"thèmeImages":"unDraw","thèmeNuit":!1},mutations:{"changerNumération":function(e,t){e.numération=t.système},"changerThèmeImage":function(e,t){e.thèmeImages=t.thème},changerLangue:function(e,t){e.langue=t.langue},"changerThèmeNuit":function(e,t){e.thèmeNuit=t.val}},actions:{},getters:{"systèmeNumération":function(e){var t=e.numération;return null===t?Object(Ie["rajilanïkChabäl"])(e.langue)||"latin":t}},modules:{}};r["a"].use(Ce["a"]);var Ae=new _e["a"],Se=new Ce["a"].Store({modules:{conditions:De,"paramètres":Le},plugins:[Ae.plugin]}),Pe=n("5530"),Me=n("f309"),Ee=n("a925"),Ne=n("9324"),ze=n("4428"),Ve=n("4720"),qe=n("64dc"),Te=n("3bd4"),$e=n("a8de"),Fe=n("ef60"),Ue=n("83af"),Je=n("8e29"),Ge=n("98c0"),He=n("4b41"),Ke=n("f950"),We=n("ead6"),Ye=n("03fd"),Ze=n("43a3"),Xe=n("ea1f"),Qe=n("131b"),et=n("0924"),tt=n("6dfc"),nt=n("c2a1"),rt=n("1902"),it=n("f5e4"),at=n("e184"),st=n("07ae"),ut=n("4642"),ct=n("800a"),ot=n("7597"),lt=n("df7f"),dt=n("fa37"),pt=n("0879"),ft=n("b854"),ht=n("ae0b"),mt=n("af68"),vt=n("035c"),bt=n("aef1"),gt=n("659a"),xt=n("ea76"),wt=n("25a2"),kt=n("582c"),yt={af:ze["a"],ar:Ve["a"],az:qe["a"],bg:Te["a"],ca:$e["a"],ckb:Fe["a"],cs:Ue["a"],de:Je["a"],el:Ge["a"],en:He["a"],es:Ke["a"],et:We["a"],fa:Ye["a"],fi:Ze["a"],fr:Xe["a"],he:Qe["a"],hr:et["a"],id:tt["a"],it:nt["a"],ja:rt["a"],ko:it["a"],lt:at["a"],lv:st["a"],nl:ut["a"],no:ct["a"],pl:ot["a"],pt:lt["a"],ro:dt["a"],ru:pt["a"],sk:ft["a"],sl:ht["a"],srCyrl:mt["a"],sv:vt["a"],th:bt["a"],tr:gt["a"],uk:xt["a"],zhHans:wt["a"],zhHant:kt["a"]};r["a"].use(Me["a"]),r["a"].use(Ee["a"]);var Rt=new Ee["a"]({locale:"fr",fallbackLocale:["fr"],messages:Ne}),jt={lang:{locales:yt,current:"fr"}},Bt=new Me["a"](Object(Pe["a"])(Object(Pe["a"])({},jt),{},{rtl:!1})),Ot=n("666c"),Ct=(n("373e"),n("53ca")),_t=n("2909"),Dt=n("b85c"),It=n("1da1"),Lt=n("bee2"),At=n("668b"),St=(n("96cf"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("2ca0"),n("caad"),n("25f0"),n("159b"),n("7db0"),n("6062"),n("0481"),n("4de4"),n("d81d"),n("07ac"),n("c1f9"),n("b64b"),n("2532"),n("4fad"),n("faa1")),Pt=n("11c1"),Mt=n("41db"),Et=n("f773"),Nt=n.n(Et),zt=n("3835"),Vt=n("0f65"),qt=n.n(Vt),Tt=n("720b"),$t=n.n(Tt),Ft=n("dbc1"),Ut="controlleur-constellation",Jt=["ready","write","replicate","replicated"],Gt=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=function(){var e=t.iterator({limit:-1}).collect().map((function(e){return e.payload.value}));n(e)},i=Object(Dt["a"])(Jt);try{for(i.s();!(a=i.n()).done;)s=a.value,t.events.on(s,r)}catch(c){i.e(c)}finally{i.f()}return r(),u=function(){Jt.forEach((function(e){t.events.off(e,r)}))},e.abrupt("return",u);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ht=function(e){Object(J["a"])(n,e);var t=Object(G["a"])(n);function n(e){var r;return Object(U["a"])(this,n),r=t.call(this),r.orbite=void 0,r.bd=void 0,r.bdAccès=void 0,r.oublierSuivi=void 0,r.autorisés=void 0,r.accès=void 0,r.orbite=e,r.autorisés=[],r}return Object(Lt["a"])(n,[{key:"initialiser",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.orbite.open(t);case 2:return this.bd=e.sent,e.next=5,this.bd.load();case 5:return this.accès=this.bd.access,this.bdAccès=this.accès.bd,e.next=9,Gt(this.bdAccès,function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n._miseÀJour(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 9:this.oublierSuivi=e.sent;case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_miseÀJour",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=[],t=[{id:this.accès._premierMod,"rôle":Ft["b"]}].concat(Object(_t["a"])(t)),t.forEach((function(e){n.push(e.id)})),this.autorisés=n;case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"fermer",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.oublierSuivi(),e.next=3,this.bd.close();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(St["EventEmitter"]),Kt=function(e){Object(J["a"])(n,e);var t=Object(G["a"])(n);function n(e,r){var i;return Object(U["a"])(this,n),i=t.call(this),i.bd=void 0,i.nom=void 0,i._orbitdb=void 0,i._premierMod=void 0,i._rôles=void 0,i.adresseBd=void 0,i._rôlesIdOrbite=void 0,i._rôlesUtilisateurs=void 0,i._miseÀJourEnCours=void 0,i._orbitdb=e,i._premierMod=r.premierMod,i.adresseBd=r.adresseBd,i.nom=r.nom,i._rôles={"MODÉRATEUR":[],MEMBRE:[]},i._rôlesIdOrbite={"MODÉRATEUR":[],MEMBRE:[]},i._rôlesUtilisateurs={"MODÉRATEUR":{},MEMBRE:{}},i._miseÀJourEnCours=!1,i}return Object(Lt["a"])(n,[{key:"address",get:function(){return this.bd.address}},{key:"estUnMembre",value:function(e){return this._rôles[Ft["a"]].includes(e)}},{key:"estUnModérateur",value:function(e){return this._rôles[Ft["b"]].includes(e)}},{key:"estAutorisé",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this._miseÀJourEnCours){e.next=3;break}return e.next=3,Object(St["once"])(this,"misÀJour");case 3:return e.abrupt("return",this.estUnModérateur(t)||this.estUnMembre(t));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"suivreUtilisateursAutorisés",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=function(){var e=Object.keys(i._rôlesUtilisateurs[Ft["b"]]).map((function(e){return{idBdRacine:e,"rôle":Ft["b"]}})),n=Object.keys(i._rôlesUtilisateurs[Ft["a"]]).map((function(e){return{idBdRacine:e,"rôle":Ft["a"]}})),r=[].concat(Object(_t["a"])(e),Object(_t["a"])(n));t(r)},this.on("misÀJour",n),n(),r=function(){i.off("misÀJour",n)},e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"canAppend",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.verifyIdentity(t.identity);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=3,this.estAutorisé(t.identity.id);case 3:if(!e.sent){e.next=7;break}return e.next=6,r();case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"rôles",get:function(){return this._rôles}},{key:"_miseÀJourBdAccès",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._miseÀJourEnCours=!0,t=[{"rôle":Ft["b"],id:this._premierMod}].concat(Object(_t["a"])(t)),e.next=4,Promise.all(t.map(function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var r,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.rôle,i=t.id,!Object(Et["isValidAddress"])(i)){e.next=10;break}if(n._rôlesUtilisateurs[r][i]){e.next=8;break}return a=new Ht(n._orbitdb),a.on("misÀJour",(function(){return n._mettreRôlesÀJour()})),e.next=7,a.initialiser(i);case 7:n._rôlesUtilisateurs[r][i]=a;case 8:e.next=11;break;case 10:n._rôlesIdOrbite[r].includes(i)||n._rôlesIdOrbite[r].push(i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:this._miseÀJourEnCours=!1,this._mettreRôlesÀJour(),this.emit("misÀJour");case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_mettreRôlesÀJour",value:function(){for(var e={"MODÉRATEUR":[],MEMBRE:[]},t=function(){var t=Object(zt["a"])(r[n],2),i=t[0],a=t[1],s=e[i];a.forEach((function(e){s.includes(e)||s.push(e)}))},n=0,r=Object.entries(this._rôlesIdOrbite);n<r.length;n++)t();for(var i=function(){var t=Object(zt["a"])(s[a],2),n=t[0],r=t[1],i=e[n];Object.values(r).forEach((function(e){e.autorisés.forEach((function(e){i.includes(e)||i.push(e)}))}))},a=0,s=Object.entries(this._rôlesUtilisateurs);a<s.length;a++)i();this._rôles=e}},{key:"get",value:function(e){return this.rôles[e]||[]}},{key:"close",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.bd.close();case 2:return t=Object.values(this._rôlesUtilisateurs).map((function(e){return Object.values(e)})).flat(),e.next=5,Promise.all(t.map((function(e){return e.fermer()})));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"load",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Object(Et["isValidAddress"])(t),!this.bd){e.next=4;break}return e.next=4,this.bd.close();case 4:return e.next=6,this._orbitdb.feed(qt()(t),this._createOrbitOpts(n));case 6:return this.bd=e.sent,Gt(this.bd,(function(e){return r._miseÀJourBdAccès(e)})),e.next=10,this.bd.load();case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_createOrbitOpts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={type:"controlleur-accès-constellation",premierMod:this._premierMod};return e?{}:{accessController:t}}},{key:"save",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=this.adresseBd,e.t0){e.next=5;break}return e.next=4,this._orbitdb.determineAddress("".concat(this.nom,"/_access"),"feed",this._createOrbitOpts());case 4:e.t0=e.sent;case 5:return t=e.t0,n={address:t.toString(),premierMod:this._premierMod,nom:this.nom},e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"grant",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Ft["c"].includes(t)){e.next=2;break}throw new Error("Erreur: Le rôle ".concat(t," n'existe pas."));case 2:if(!this.rôles[t].includes(n)){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,r={"rôle":t,id:n},e.next=8,this.bd.add(r);case 8:e.next=15;break;case 10:if(e.prev=10,e.t0=e["catch"](4),!e.t0.toString().includes("not append entry")){e.next=14;break}throw new Error("Erreur : Le rôle ".concat(t," ne peut pas être octroyé à ").concat(n,"."));case 14:throw e.t0;case 15:case"end":return e.stop()}}),e,this,[[4,10]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"revoke",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.bd.iterator({limit:-1}).collect().find((function(e){return e.payload.value.rôle===t&&e.payload.value.id===n})),r){e.next=3;break}throw new Error("Erreur : Le rôle ".concat(t," n'existait pas pour ").concat(n,"."));case 3:return i=r.hash,e.next=6,this.bd.remove(i);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()}],[{key:"type",get:function(){return Ut}},{key:"create",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.premierMod||(r.premierMod=t.identity.id),r.nom=r.nom||Object(Pt["v4"])(),e.abrupt("return",new n(t,r));case 3:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),n}($t.a),Wt="controlleur-accès-constellation",Yt=function(e){Object(J["a"])(n,e);var t=Object(G["a"])(n);function n(e){var r;return Object(U["a"])(this,n),r=t.call(this),r._accèsÉcriture=void 0,r._premierMod=void 0,r._accèsÉcriture=[e.premierMod],r._premierMod=e.premierMod,r}return Object(Lt["a"])(n,[{key:"estUnModérateur",value:function(e){return this._accèsÉcriture.includes(e)}},{key:"premierMod",get:function(){return this._premierMod}},{key:"canAppend",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s,u,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.identity.id,i=t.payload.value,a=i.rôle,s=i.id,u=this.estUnModérateur(r),c=Ft["c"].includes(a),o=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",n.verifyIdentity(t.identity));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.t0=u&&c,!e.t0){e.next=10;break}return e.next=9,o();case 9:e.t0=e.sent;case 10:if(!e.t0){e.next=16;break}if(a!==Ft["b"]){e.next=15;break}if(s!==this._premierMod){e.next=14;break}return e.abrupt("return",!0);case 14:this._accèsÉcriture.push(s);case 15:return e.abrupt("return",!0);case 16:return e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"load",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"save",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={premierMod:this.premierMod},e.abrupt("return",t);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}],[{key:"type",get:function(){return Wt}},{key:"create",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var r,i,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:{},i=r.premierMod,i){e.next=4;break}throw new Error("Contrôle d'accès: premier modérateur requis");case 4:return e.abrupt("return",new n({premierMod:i}));case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(St["EventEmitter"]);Et["AccessControllers"].addAccessController({AccessController:Kt}),Et["AccessControllers"].addAccessController({AccessController:Yt});var Zt=Et["AccessControllers"];function Xt(e){return Qt.apply(this,arguments)}function Qt(){return Qt=Object(It["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Nt.a.createInstance(t,{AccessControllers:Zt});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),Qt.apply(this,arguments)}var en=n("4e0d"),tn=n.n(en),nn=n("b04a"),rn=n.n(nn),an=n("6101"),sn=n.n(an),un=n("1321"),cn=n.n(un),on=n("2f85"),ln=n.e("chunk-694e3779").then(n.t.bind(null,"9b56",7));function dn(){return pn.apply(this,arguments)}function pn(){return pn=Object(It["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:"./ipfs",e.next=3,ln;case 3:return n=e.sent,e.next=6,n.create({libp2p:{modules:{transport:[rn.a,sn.a,cn.a]},config:{peerDiscovery:{webRTCStar:{enabled:!0}},transport:{WebRTCStar:{wrtc:tn.a,connEncryption:[on["NOISE"]]}}}},relay:{enabled:!0,hop:{enabled:!0,active:!0}},config:{Addresses:{Swarm:["/dns4/arcane-springs-02799.herokuapp.com/tcp/443/wss/p2p-webrtc-star/"]}},repo:t});case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)}))),pn.apply(this,arguments)}var fn=n("f3bf"),hn=n.n(fn),mn=5e5,vn=15e5,bn=function(){function e(t,n){Object(U["a"])(this,e),this.client=void 0,this.idBd=void 0,this.MAX_TAILLE_IMAGE=mn,this.MAX_TAILLE_IMAGE_VIS=vn,this.client=t,this.idBd=n}return Object(Lt["a"])(e,[{key:"suivreCourriel",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=n||this.idBd,e.next=3,this.client.suivreBd(n,function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.get("courriel");case 2:r=e.sent,t(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"sauvegarderCourriel",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.ouvrirBd(this.idBd);case 2:return n=e.sent,e.next=5,n.set("courriel",t);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"effacerCourriel",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.ouvrirBd(this.idBd);case 2:return t=e.sent,e.next=5,t.del("courriel");case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"suivreNoms",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=n||this.idBd,e.next=3,this.client.suivreBdDicDeClef(n,"noms",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"sauvegarderNom",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtIdBd("noms",this.idBd,"kvstore");case 2:if(r=e.sent,r){e.next=5;break}throw"Permission de modification refusée pour BD ".concat(this.idBd,".");case 5:return e.next=7,this.client.ouvrirBd(r);case 7:return i=e.sent,e.next=10,i.set(t,n);case 10:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"effacerNom",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtIdBd("noms",this.idBd);case 2:if(n=e.sent,n){e.next=5;break}throw"Permission de modification refusée pour BD ".concat(this.idBd,".");case 5:return e.next=7,this.client.ouvrirBd(n);case 7:return r=e.sent,e.next=10,r.del(t);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"sauvegarderImage",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.size>mn)){e.next=2;break}return e.abrupt("return",Promise.reject("Taille maximale excédée"));case 2:return e.next=4,t.arrayBuffer();case 4:return n=e.sent,e.next=7,this.client.ajouterÀSFIP(n);case 7:return r=e.sent,e.next=10,this.client.ouvrirBd(this.idBd);case 10:return i=e.sent,e.next=13,i.set("image",r);case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"effacerImage",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.ouvrirBd(this.idBd);case 2:return t=e.sent,e.next=5,t.del("image");case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"suivreImage",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=n||this.idBd,e.next=3,this.client.suivreBd(n,function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(n){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.get("image");case 2:if(i=e.sent,i){e.next=5;break}return e.abrupt("return",t(null));case 5:return e.next=7,r.client.obtFichierSFIP(i,vn);case 7:a=e.sent,t(a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}(),gn={ACTIVE:"active","OBSOLÈTE":"obsolète"},xn=function(){function e(t,n){Object(U["a"])(this,e),this.client=void 0,this.idBd=void 0,this.client=t,this.idBd=n,this.migrerBds()}return Object(Lt["a"])(e,[{key:"suivreBds",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=n||this.idBd,e.next=3,this.client.suivreBdListe(n,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"créerBd",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,s,u,c,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.ouvrirBd(this.idBd);case 2:return n=e.sent,e.next=5,this.client.créerBdIndépendante("kvstore",{adresseBd:void 0,premierMod:this.client.bdRacine.id});case 5:return r=e.sent,e.next=8,n.add(r);case 8:return e.next=10,this.client.ouvrirBd(r);case 10:return i=e.sent,e.next=13,i.set("licence",t);case 13:return a=i.access,s={adresseBd:a.adresseBd},e.next=17,this.client.créerBdIndépendante("kvstore",s);case 17:return u=e.sent,e.next=20,i.set("noms",u);case 20:return e.next=22,this.client.créerBdIndépendante("kvstore",s);case 22:return c=e.sent,e.next=25,i.set("descriptions",c);case 25:return e.next=27,this.client.créerBdIndépendante("feed",s);case 27:return o=e.sent,e.next=30,i.set("tableaux",o);case 30:return e.next=32,this.client.créerBdIndépendante("feed",s);case 32:return l=e.sent,e.next=35,i.set("motsClefs",l);case 35:return e.next=37,i.set("statut",{statut:gn.ACTIVE});case 37:return e.abrupt("return",r);case 38:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"copierBd",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,s,u,c,o,l,d,p,f,h,m,v,b,g,x,w=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.ouvrirBd(t);case 2:return n=e.sent,e.next=5,n.get("licence");case 5:return r=e.sent,e.next=8,this.créerBd(r);case 8:return i=e.sent,e.next=11,this.client.ouvrirBd(i);case 11:return a=e.sent,e.next=14,n.get("noms");case 14:return s=e.sent,e.next=17,this.client.ouvrirBd(s);case 17:return u=e.sent,c=Tn.obtObjetdeBdDic(u),e.next=21,this.ajouterNomsBd(i,c);case 21:return e.next=23,n.get("descriptions");case 23:return o=e.sent,e.next=26,this.client.ouvrirBd(o);case 26:return l=e.sent,d=Tn.obtObjetdeBdDic(l),e.next=30,this.ajouterDescriptionsBd(i,d);case 30:return e.next=32,n.get("motsClefs");case 32:return p=e.sent,e.next=35,this.client.ouvrirBd(p);case 35:return f=e.sent,h=Tn.obtÉlémentsDeBdListe(f),e.next=39,this.ajouterMotsClefsBd(i,h);case 39:return e.next=41,n.get("tableaux");case 41:return m=e.sent,e.next=44,a.get("tableaux");case 44:return v=e.sent,e.next=47,this.client.ouvrirBd(m);case 47:return b=e.sent,g=Tn.obtÉlémentsDeBdListe(b),g.forEach(function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,w.client.tableaux.copierTableau(t);case 2:return n=e.sent,e.next=5,v.add(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=52,n.get("statut");case 52:if(e.t0=e.sent,e.t0){e.next=55;break}e.t0=gn.ACTIVE;case 55:return x=e.t0,e.next=58,a.set("statut",{statut:x});case 58:return e.abrupt("return",i);case 59:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"migrerBds",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.client.ouvrirBd(t);case 2:if(n=e.sent,n.access.type,r=n.access.constructor.type,r===Ut){e.next=12;break}return e.next=8,i.copierBd(t);case 8:return a=e.sent,e.next=11,i.marquerObsolète(t,a);case 11:return e.abrupt("return",a);case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=3,this.client.ouvrirBd(this.idBd);case 3:n=e.sent,r=Tn.obtÉlémentsDeBdListe(n),r.forEach(function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(r){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t(r);case 2:if(i=e.sent,r===i){e.next=6;break}return e.next=6,n.add(i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"ajouterNomsBd",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtOpsAccès(t);case 2:return r=e.sent,e.next=5,this.client.obtIdBd("noms",t,"kvstore",r);case 5:if(i=e.sent,i){e.next=8;break}throw"Permission de modification refusée pour BD ".concat(t,".");case 8:return e.next=10,this.client.ouvrirBd(i);case 10:a=e.sent,e.t0=regeneratorRuntime.keys(n);case 12:if((e.t1=e.t0()).done){e.next=18;break}return s=e.t1.value,e.next=16,a.set(s,n[s]);case 16:e.next=12;break;case 18:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"sauvegarderNomBd",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n,r){var i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtOpsAccès(t);case 2:return i=e.sent,e.next=5,this.client.obtIdBd("noms",t,"kvstore",i);case 5:if(a=e.sent,a){e.next=8;break}throw"Permission de modification refusée pour BD ".concat(t,".");case 8:return e.next=10,this.client.ouvrirBd(a);case 10:return s=e.sent,e.next=13,s.set(n,r);case 13:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"effacerNomBd",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtOpsAccès(t);case 2:return r=e.sent,e.next=5,this.client.obtIdBd("noms",t,"kvstore",r);case 5:if(i=e.sent,i){e.next=8;break}throw"Permission de modification refusée pour BD ".concat(t,".");case 8:return e.next=10,this.client.ouvrirBd(i);case 10:return a=e.sent,e.next=13,a.del(n);case 13:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"ajouterDescriptionsBd",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtOpsAccès(t);case 2:return r=e.sent,e.next=5,this.client.obtIdBd("descriptions",t,"kvstore",r);case 5:if(i=e.sent,i){e.next=8;break}throw"Permission de modification refusée pour BD ".concat(t,".");case 8:return e.next=10,this.client.ouvrirBd(i);case 10:a=e.sent,e.t0=regeneratorRuntime.keys(n);case 12:if((e.t1=e.t0()).done){e.next=18;break}return s=e.t1.value,e.next=16,a.set(s,n[s]);case 16:e.next=12;break;case 18:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"sauvegarderDescrBd",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n,r){var i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtOpsAccès(t);case 2:return i=e.sent,e.next=5,this.client.obtIdBd("descriptions",t,"kvstore",i);case 5:if(a=e.sent,a){e.next=8;break}throw"Permission de modification refusée pour BD ".concat(t,".");case 8:return e.next=10,this.client.ouvrirBd(a);case 10:return s=e.sent,e.next=13,s.set(n,r);case 13:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"effacerDescrBd",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtOpsAccès(t);case 2:return r=e.sent,e.next=5,this.client.obtIdBd("descriptions",t,"kvstore",r);case 5:if(i=e.sent,i){e.next=8;break}throw"Permission de modification refusée pour BD ".concat(t,".");case 8:return e.next=10,this.client.ouvrirBd(i);case 10:return a=e.sent,e.next=13,a.del(n);case 13:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"changerLicenceBd",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.ouvrirBd(t);case 2:return r=e.sent,e.next=5,r.set("licence",n);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"ajouterMotsClefsBd",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Array.isArray(n)||(n=[n]),e.next=3,this.client.obtOpsAccès(t);case 3:return r=e.sent,e.next=6,this.client.obtIdBd("motsClefs",t,"feed",r);case 6:if(i=e.sent,i){e.next=9;break}throw"Permission de modification refusée pour BD ".concat(t,".");case 9:return e.next=11,this.client.ouvrirBd(i);case 11:a=e.sent,n.forEach(function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Tn.obtÉlémentsDeBdListe(a),n.includes(t)){e.next=4;break}return e.next=4,a.add(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 13:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"effacerMotClefBd",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtOpsAccès(t);case 2:return r=e.sent,e.next=5,this.client.obtIdBd("motsClefs",t,"feed",r);case 5:if(i=e.sent,i){e.next=8;break}throw"Permission de modification refusée pour BD ".concat(t,".");case 8:return e.next=10,this.client.ouvrirBd(i);case 10:if(a=e.sent,s=Tn.obtÉlémentsDeBdListe(a,!1),u=s.find((function(e){return e.payload.value===n})),!u){e.next=16;break}return e.next=16,a.remove(u.hash);case 16:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"ajouterTableauBD",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtOpsAccès(t);case 2:return n=e.sent,e.next=5,this.client.obtIdBd("tableaux",t,"feed",n);case 5:if(r=e.sent,r){e.next=8;break}throw"Permission de modification refusée pour BD ".concat(t,".");case 8:return e.next=10,this.client.ouvrirBd(r);case 10:return i=e.sent,e.next=13,this.client.tableaux.créerTableau();case 13:return a=e.sent,e.next=16,i.add(a);case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"effacerTableauBD",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtOpsAccès(t);case 2:return r=e.sent,e.next=5,this.client.obtIdBd("tableaux",t,"feed",r);case 5:if(i=e.sent,i){e.next=8;break}throw"Permission de modification refusée pour BD ".concat(t,".");case 8:return e.next=10,this.client.ouvrirBd(i);case 10:if(a=e.sent,s=Tn.obtÉlémentsDeBdListe(a,!1),u=s.find((function(e){return e.payload.value===n})),!u){e.next=16;break}return e.next=16,a.remove(u.hash);case 16:return e.next=18,this.client.tableaux.effacerTableau(n);case 18:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"marquerObsolète",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.ouvrirBd(t);case 2:r=e.sent,r.set("statut",{statut:gn.OBSOLÈTE,idNouvelle:n});case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreLicence",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.suivreBd(t,function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.get("licence");case 2:r=e.sent,n(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreAuteurs",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s,u,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.client.suivreAccèsBd(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(n,r,i){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=function(e){return e=e||[],r([{idBdRacine:i.idBdRacine,"rôle":i.rôle,"accepté":e.includes(t)}])},e.next=3,c.client.réseau.suivreFavorisMembre(n,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),a=function(e){return e.idBdRacine},s=function(e){return e.idBdRacine},u=this.client.suivreBdsDeFonctionListe(r,n,i,a,void 0,s),e.abrupt("return",u);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreNomsBd",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.suivreBdDicDeClef(t,"noms",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreDescrBd",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.suivreBdDicDeClef(t,"descriptions",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreMotsClefsBd",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.suivreBdListeDeClef(t,"motsClefs",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreTableauxBd",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.suivreBdListeDeClef(t,"tableaux",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreScoreBd",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.suivreBd(t,(function(){var e=Math.floor(100*Math.random()),t=Math.floor(100*Math.random()),r=Math.floor(100*Math.random());n({total:Math.floor((e+t+r)/3),"accès":e,couverture:t,passe:r})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreVariablesBd",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=function(e){return n(e||[])},i=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.client.tableaux.suivreVariables(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.client.suivreBdsDeBdListe(t,n,i);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.next=5,this.client.suivreBdDeClef(t,"tableaux",r,a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"effacerBd",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,s,u,c,o,l,d,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.ouvrirBd(this.idBd);case 2:return n=e.sent,r=n.iterator({limit:-1}).collect().find((function(e){return e.payload.value===t})),e.next=6,n.remove(r.hash);case 6:return e.next=8,this.client.obtOpsAccès(t);case 8:i=e.sent,e.t0=regeneratorRuntime.keys(["noms","descriptions","motsClefs"]);case 10:if((e.t1=e.t0()).done){e.next=20;break}return a=e.t1.value,e.next=14,this.client.obtIdBd(a,t,void 0,i);case 14:if(s=e.sent,!s){e.next=18;break}return e.next=18,this.client.effacerBd(s);case 18:e.next=10;break;case 20:return e.next=22,this.client.obtIdBd("tableaux",t,"feed",i);case 22:if(u=e.sent,!u){e.next=45;break}return e.next=26,this.client.ouvrirBd(u);case 26:c=e.sent,o=c.iterator({limit:-1}).collect().map((function(e){return e.payload.value})),l=Object(Dt["a"])(o),e.prev=29,l.s();case 31:if((d=l.n()).done){e.next=37;break}return p=d.value,e.next=35,this.client.tableaux.effacerTableau(p);case 35:e.next=31;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e["catch"](29),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:return e.next=47,this.client.effacerBd(t);case 47:case"end":return e.stop()}}),e,this,[[29,39,42,45]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),wn=n("ade3"),kn=n("9549");function yn(e,t){var n=Object.keys(e),r=Object.keys(t);return!!n.every((function(n){return e[n]===t[n]}))&&!!r.every((function(n){return e[n]===t[n]}))}var Rn=function(){function e(t){Object(U["a"])(this,e),this.client=void 0,this.client=t}return Object(Lt["a"])(e,[{key:"créerTableau",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a,s,u,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.créerBdIndépendante("kvstore",{adresseBd:void 0,premierMod:this.client.bdRacine.id});case 2:return t=e.sent,e.next=5,this.client.ouvrirBd(t);case 5:return n=e.sent,r=n.access,i={adresseBd:r.adresseBd},e.next=10,this.client.créerBdIndépendante("kvstore",i);case 10:return a=e.sent,e.next=13,n.set("noms",a);case 13:return e.next=15,this.client.créerBdIndépendante("feed",i);case 15:return s=e.sent,e.next=18,n.set("données",s);case 18:return e.next=20,this.client.créerBdIndépendante("feed",i);case 20:return u=e.sent,e.next=23,n.set("colonnes",u);case 23:return e.next=25,this.client.créerBdIndépendante("feed",i);case 25:return c=e.sent,e.next=28,n.set("règles",c);case 28:return e.abrupt("return",t);case 29:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"copierTableau",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.ouvrirBd(t);case 2:return n=e.sent,e.next=5,this.créerTableau();case 5:return r=e.sent,e.next=8,this.client.ouvrirBd(r);case 8:return i=e.sent,e.next=11,n.get("noms");case 11:return a=e.sent,e.next=14,this.client.ouvrirBd(a);case 14:return s=e.sent.all,e.next=17,this.ajouterNomsTableau(r,s);case 17:return e.next=19,this.client.copierContenuBdListe(n,i,"données");case 19:return e.next=21,this.client.copierContenuBdListe(n,i,"colonnes");case 21:return e.next=23,this.client.copierContenuBdListe(n,i,"règles");case 23:return e.abrupt("return",r);case 24:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"suivreDonnées",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=function(e){var t=e.map((function(e){return Object(Pe["a"])(Object(Pe["a"])({},e.payload.value),{},{empreinte:e.hash})}));n(t)},e.next=3,this.client.suivreBdListeDeClef(t,"données",r,!1);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"ajouterÉlément",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtOpsAccès(t);case 2:return r=e.sent,e.next=5,this.client.obtIdBd("données",t,"feed",r);case 5:if(i=e.sent,i){e.next=8;break}throw"Permission de modification refusée pour BD ".concat(t,".");case 8:return e.next=10,this.client.ouvrirBd(i);case 10:return a=e.sent,e.next=13,this.vérifierClefsÉlément(t,n);case 13:return n=e.sent,s=Object(Pt["v4"])(),e.next=17,a.add(Object(Pe["a"])(Object(Pe["a"])({},n),{},{id:s}));case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"modifierÉlément",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n,r){var i,a,s,u,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtOpsAccès(t);case 2:return i=e.sent,e.next=5,this.client.obtIdBd("données",t,"feed",i);case 5:if(a=e.sent,a){e.next=8;break}throw"Permission de modification refusée pour BD ".concat(t,".");case 8:return e.next=10,this.client.ouvrirBd(a);case 10:return s=e.sent,u=this.client.obtÉlémentBdListeSelonEmpreinte(s,r),c=Object.assign({},u,n),Object.keys(n).map((function(e){void 0===n[e]&&delete c[e]})),e.next=16,this.vérifierClefsÉlément(t,c);case 16:if(c=e.sent,yn(c,u)){e.next=22;break}return e.next=20,Promise.all([s.remove(r),s.add(c)]);case 20:return o=e.sent,e.abrupt("return",o[1]);case 22:return e.abrupt("return",Promise.resolve());case 23:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"vérifierClefsÉlément",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s,u,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtOpsAccès(t);case 2:return r=e.sent,e.next=5,this.client.obtIdBd("colonnes",t,"feed",r);case 5:if(i=e.sent,i){e.next=8;break}throw"Permission de modification refusée pour BD ".concat(t,".");case 8:return e.next=10,this.client.ouvrirBd(i);case 10:return a=e.sent,s=a.iterator({limit:-1}).collect().map((function(e){return e.payload.value.id})),u=[].concat(Object(_t["a"])(s),["id"]),c=Object.keys(n).filter((function(e){return u.includes(e)})),e.abrupt("return",Object.fromEntries(c.map((function(e){return[e,n[e]]}))));case 15:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"effacerÉlément",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtOpsAccès(t);case 2:return r=e.sent,e.next=5,this.client.obtIdBd("données",t,"feed",r);case 5:if(i=e.sent,i){e.next=8;break}throw"Permission de modification refusée pour BD ".concat(t,".");case 8:return e.next=10,this.client.ouvrirBd(i);case 10:return a=e.sent,e.next=13,a.remove(n);case 13:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"ajouterNomsTableau",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtOpsAccès(t);case 2:return r=e.sent,e.next=5,this.client.obtIdBd("noms",t,"kvstore",r);case 5:if(i=e.sent,i){e.next=8;break}throw"Permission de modification refusée pour BD ".concat(t,".");case 8:return e.next=10,this.client.ouvrirBd(i);case 10:a=e.sent,e.t0=regeneratorRuntime.keys(n);case 12:if((e.t1=e.t0()).done){e.next=18;break}return s=e.t1.value,e.next=16,a.set(s,n[s]);case 16:e.next=12;break;case 18:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"sauvegarderNomTableau",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n,r){var i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtOpsAccès(t);case 2:return i=e.sent,e.next=5,this.client.obtIdBd("noms",t,"kvstore",i);case 5:if(a=e.sent,a){e.next=8;break}throw"Permission de modification refusée pour BD ".concat(t,".");case 8:return e.next=10,this.client.ouvrirBd(a);case 10:return s=e.sent,e.next=13,s.set(n,r);case 13:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"effacerNomTableau",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtOpsAccès(t);case 2:return r=e.sent,e.next=5,this.client.obtIdBd("noms",t,"kvstore",r);case 5:if(i=e.sent,i){e.next=8;break}throw"Permission de modification refusée pour BD ".concat(t,".");case 8:return e.next=10,this.client.ouvrirBd(i);case 10:return a=e.sent,e.next=13,a.del(n);case 13:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreNomsTableau",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.suivreBdDicDeClef(t,"noms",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"ajouterColonneTableau",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtOpsAccès(t);case 2:return r=e.sent,e.next=5,this.client.obtIdBd("colonnes",t,"feed",r);case 5:if(i=e.sent,i){e.next=8;break}throw"Permission de modification refusée pour BD ".concat(t,".");case 8:return e.next=10,this.client.ouvrirBd(i);case 10:return a=e.sent,s={id:Object(Pt["v4"])(),variable:n},e.next=14,a.add(s);case 14:return e.abrupt("return",s.id);case 15:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreColonnes",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s,u,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=function(e){return n(e||[])},i=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.client.variables.suivreCatégorieVariable(t,function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=Object.assign({"catégorie":t},r),n(i);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),a=function(e){return e.variable},s=function(e){return e.id},u=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.client.suivreBdsDeBdListe(t,n,i,a,void 0,s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.next=7,this.client.suivreBdDeClef(t,"colonnes",r,u);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreVariables",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=function(e){n((e||[]).filter((function(e){return e&&Object(Et["isValidAddress"])(e)})))},i=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.client.suivreBdListe(t,(function(e){return n(e.map((function(e){return e.variable})))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.next=4,this.client.suivreBdDeClef(t,"colonnes",r,i);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"ajouterRègleTableau",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n,r){var i,a,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtOpsAccès(t);case 2:return i=e.sent,e.next=5,this.client.obtIdBd("règles",t,"feed",i);case 5:if(a=e.sent,a){e.next=8;break}throw"Permission de modification refusée pour tableau ".concat(t,".");case 8:return e.next=10,this.client.ouvrirBd(a);case 10:return s=e.sent,u={"règle":r,source:"tableau",colonne:n},e.next=14,s.add(u);case 14:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"suivreRègles",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s,u,c,o,l,d,p,f,h=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={tableau:[],variable:[]},i=function(){return n([].concat(Object(_t["a"])(r.tableau),Object(_t["a"])(r.variable)))},a=function(e){r.tableau=e,i()},e.next=5,this.client.suivreBdListeDeClef(t,"règles",a);case 5:return s=e.sent,u=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h.suivreColonnes(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(e){r.variable=e,i()},o=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n,r){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=function(e){var t=e.map((function(e){return{"règle":e,source:"variable",colonne:r.id}}));return n(t)},e.next=3,h.client.variables.suivreRèglesVariable(t,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),l=function(e){return e.variable},d=function(e){return e.id},e.next=13,this.client.suivreBdsDeFonctionListe(u,c,o,l,void 0,d);case 13:return p=e.sent,f=function(){s(),p()},e.abrupt("return",f);case 16:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreValidDonnées",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s,u,c,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={"données":[],"règles":[]},i=function(){var e,t=[],i=Object(Dt["a"])(r.règles);try{for(i.s();!(e=i.n()).done;){var a=e.value,s=a(r.données);t=[].concat(Object(_t["a"])(t),Object(_t["a"])(s.flat()))}}catch(u){i.e(u)}finally{i.f()}n(t)},a=function(e){r.varsÀColonnes&&(r.règles=e.map((function(e){return Object(kn["b"])(e,r.varsÀColonnes)})),i())},s=function(e){r.données=e,i()},e.next=6,this.suivreColonnes(t,(function(e){var t=e.reduce((function(e,t){return Object(Pe["a"])(Object(Pe["a"])({},e),{},Object(wn["a"])({},t.variable,t.id))}),{});r.varsÀColonnes=t}));case 6:return u=e.sent,e.next=9,this.suivreRègles(t,a);case 9:return c=e.sent,e.next=12,this.suivreDonnées(t,s);case 12:return o=e.sent,l=function(){c(),o(),u()},e.abrupt("return",l);case 15:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"effacerTableau",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtOpsAccès(t);case 2:n=e.sent,e.t0=regeneratorRuntime.keys(["noms"]);case 4:if((e.t1=e.t0()).done){e.next=14;break}return r=e.t1.value,e.next=8,this.client.obtIdBd(r,t,void 0,n);case 8:if(i=e.sent,!i){e.next=12;break}return e.next=12,this.client.effacerBd(i);case 12:e.next=4;break;case 14:return e.next=16,this.client.effacerBd(t);case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),jn=function(){function e(t,n){Object(U["a"])(this,e),this.client=void 0,this.idBd=void 0,this.client=t,this.idBd=n}return Object(Lt["a"])(e,[{key:"suivreVariables",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.suivreBdListe(this.idBd,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"créerVariable",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,s,u,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.ouvrirBd(this.idBd);case 2:return n=e.sent,e.next=5,this.client.créerBdIndépendante("kvstore",{adresseBd:void 0,premierMod:this.client.bdRacine.id});case 5:return r=e.sent,e.next=8,n.add(r);case 8:return e.next=10,this.client.ouvrirBd(r);case 10:return i=e.sent,a=i.access,s={adresseBd:a.adresseBd},e.next=15,this.client.créerBdIndépendante("kvstore",s);case 15:return u=e.sent,e.next=18,i.set("noms",u);case 18:return e.next=20,this.client.créerBdIndépendante("kvstore",s);case 20:return c=e.sent,e.next=23,i.set("descriptions",c);case 23:return e.next=25,this.client.créerBdIndépendante("feed",s);case 25:return o=e.sent,e.next=28,i.set("règles",o);case 28:return e.next=30,i.set("catégorie",t);case 30:return e.next=32,i.set("unités",void 0);case 32:return e.next=34,this.établirStatut(r,{statut:gn.ACTIVE});case 34:return e.abrupt("return",r);case 35:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"copierVariable",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,s,u,c,o,l,d,p,f,h,m=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.ouvrirBd(t);case 2:return n=e.sent,e.next=5,n.get("catégorie");case 5:return r=e.sent,e.next=8,this.créerVariable(r);case 8:return i=e.sent,e.next=11,n.get("noms");case 11:return a=e.sent,e.next=14,this.client.ouvrirBd(a);case 14:return s=e.sent,u=Tn.obtObjetdeBdDic(s),e.next=18,this.ajouterNomsVariable(i,u);case 18:return e.next=20,n.get("descriptions");case 20:return c=e.sent,e.next=23,this.client.ouvrirBd(c);case 23:return o=e.sent,l=Tn.obtObjetdeBdDic(o),e.next=27,this.ajouterDescriptionsVariable(i,l);case 27:return e.next=29,n.get("règles");case 29:return d=e.sent,e.next=32,this.client.ouvrirBd(d);case 32:return p=e.sent,f=Tn.obtÉlémentsDeBdListe(p),f.forEach((function(e){m.ajouterRègleVariable(i,e)})),e.next=37,n.get("statut");case 37:if(e.t0=e.sent,e.t0){e.next=40;break}e.t0=gn.ACTIVE;case 40:return h=e.t0,e.next=43,this.établirStatut(i,{statut:h});case 43:return e.abrupt("return",i);case 44:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"migrerVariables",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.client.ouvrirBd(t);case 2:if(n=e.sent,r=n.access.constructor.type,r===Ut){e.next=11;break}return e.next=7,i.copierVariable(t);case 7:return a=e.sent,e.next=10,i.marquerObsolète(t,a);case 10:return e.abrupt("return",a);case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=3,this.client.ouvrirBd(this.idBd);case 3:n=e.sent,r=Tn.obtÉlémentsDeBdListe(n),r.forEach(function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(r){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t(r);case 2:if(i=e.sent,r===i){e.next=6;break}return e.next=6,n.add(i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"ajouterNomsVariable",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtIdBd("noms",t,"kvstore");case 2:if(r=e.sent,r){e.next=5;break}throw"Permission de modification refusée pour BD ".concat(t,".");case 5:return e.next=7,this.client.ouvrirBd(r);case 7:i=e.sent,e.t0=regeneratorRuntime.keys(n);case 9:if((e.t1=e.t0()).done){e.next=15;break}return a=e.t1.value,e.next=13,i.set(a,n[a]);case 13:e.next=9;break;case 15:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"sauvegarderNomVariable",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n,r){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtIdBd("noms",t,"kvstore");case 2:if(i=e.sent,i){e.next=5;break}throw"Permission de modification refusée pour BD ".concat(t,".");case 5:return e.next=7,this.client.ouvrirBd(i);case 7:return a=e.sent,e.next=10,a.set(n,r);case 10:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"effacerNomVariable",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtIdBd("noms",t,"kvstore");case 2:if(r=e.sent,r){e.next=5;break}throw"Permission de modification refusée pour BD ".concat(t,".");case 5:return e.next=7,this.client.ouvrirBd(r);case 7:return i=e.sent,e.next=10,i.del(n);case 10:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"ajouterDescriptionsVariable",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtIdBd("descriptions",t,"kvstore");case 2:if(r=e.sent,r){e.next=5;break}throw"Permission de modification refusée pour BD ".concat(t,".");case 5:return e.next=7,this.client.ouvrirBd(r);case 7:i=e.sent,e.t0=regeneratorRuntime.keys(n);case 9:if((e.t1=e.t0()).done){e.next=15;break}return a=e.t1.value,e.next=13,i.set(a,n[a]);case 13:e.next=9;break;case 15:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"sauvegarderDescrVariable",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n,r){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtIdBd("descriptions",t,"kvstore");case 2:if(i=e.sent,i){e.next=5;break}throw"Permission de modification refusée pour BD ".concat(t,".");case 5:return e.next=7,this.client.ouvrirBd(i);case 7:return a=e.sent,e.next=10,a.set(n,r);case 10:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"effacerbdDescrVariable",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtIdBd("descriptions",t,"kvstore");case 2:if(r=e.sent,r){e.next=5;break}throw"Permission de modification refusée pour BD ".concat(t,".");case 5:return e.next=7,this.client.ouvrirBd(r);case 7:return i=e.sent,e.next=10,i.del(n);case 10:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"sauvegarderCatégorieVariable",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.ouvrirBd(t);case 2:return r=e.sent,e.next=5,r.set("catégorie",n);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"ajouterRègleVariable",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtIdBd("règles",t,"feed");case 2:if(r=e.sent,r){e.next=5;break}throw"Permission de modification refusée pour BD ".concat(t,".");case 5:return e.next=7,this.client.ouvrirBd(r);case 7:i=e.sent,i.add(n);case 9:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreNomsVariable",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.suivreBdDicDeClef(t,"noms",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreDescrVariable",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.suivreBdDicDeClef(t,"descriptions",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreCatégorieVariable",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.suivreBd(t,function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.get("catégorie");case 2:r=e.sent,n(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreUnitésVariable",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.suivreBd(t,function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.get("unités");case 2:r=e.sent,n(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreRèglesVariable",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s,u,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={"catégorie":[],propres:[]},i=function(){n([].concat(Object(_t["a"])(r.catégorie),Object(_t["a"])(r.propres)))},a=function(e){var t={"typeRègle":"catégorie","détails":{"catégorie":e}};r.catégorie=[t],i()},e.next=5,this.suivreCatégorieVariable(t,a);case 5:return s=e.sent,u=function(e){r.propres=e,i()},e.next=9,this.client.suivreBdListeDeClef(t,"règles",u);case 9:return c=e.sent,o=function(){s(),c()},e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"établirStatut",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.ouvrirBd(t);case 2:return r=e.sent,e.next=5,r.set("statut",n);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"marquerObsolète",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.ouvrirBd(t);case 2:r=e.sent,r.set("statut",{statut:gn.OBSOLÈTE,idNouvelle:n});case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"effacerVariable",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.ouvrirBd(this.idBd);case 2:return n=e.sent,r=n.iterator({limit:-1}).collect().find((function(e){return e.payload.value===t})),e.next=6,n.remove(r.hash);case 6:return e.next=8,this.client.effacerBd(t);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),Bn=new Mt["a"],On=6e4,Cn=function(e){Object(J["a"])(n,e);var t=Object(G["a"])(n);function n(e,r){var i;Object(U["a"])(this,n),i=t.call(this),i.client=void 0,i.idBd=void 0,i.dispositifsEnLigne=void 0,i.fOublierMembres=void 0,i.client=e,i.idBd=r,i.dispositifsEnLigne={},i.fOublierMembres={};var a=function(){i.ajouterMembre({idSFIP:i.client.idNodeSFIP.id,idOrbite:i.client.orbite.identity.id,clefPublique:i.client.orbite.identity.publicKey,signatures:i.client.orbite.identity.signatures,idBdRacine:i.client.bdRacine.id})};return setInterval(a,On),a(),i._nettoyerListeMembres(),i}return Object(Lt["a"])(n,[{key:"_nettoyerListeMembres",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a,s,u,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.ouvrirBd(this.idBd);case 2:t=e.sent,n=Tn.obtÉlémentsDeBdListe(t,!1),r=[],i=Object(Dt["a"])(n),e.prev=6,i.s();case 8:if((a=i.n()).done){e.next=26;break}return s=a.value,u=s.payload.value,e.next=13,this._validerInfoMembre(u);case 13:if(c=e.sent,c){e.next=17;break}return e.next=17,t.remove(s.hash);case 17:if(o=u.idOrbite,!o||!r.includes(o)){e.next=23;break}return e.next=21,t.remove(s.hash);case 21:e.next=24;break;case 23:r.push(o);case 24:e.next=8;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e["catch"](6),i.e(e.t0);case 31:return e.prev=31,i.f(),e.finish(31);case 34:case"end":return e.stop()}}),e,this,[[6,28,31,34]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"_validerInfoMembre",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,s,u,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.idBdRacine,r=t.signatures,i=t.clefPublique,a=t.idOrbite,n&&r&&i&&a){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,this.client.vérifierSignature({signature:r.id,clefPublique:i},a);case 5:return s=e.sent,e.next=8,this.client.vérifierSignature({signature:r.publicKey,clefPublique:a},i+r.id);case 8:if(u=e.sent,Object(Et["isValidAddress"])(n)){e.next=11;break}return e.abrupt("return",!1);case 11:return e.next=13,this.client.ouvrirBd(n);case 13:if(c=e.sent,c.access instanceof Kt){e.next=16;break}return e.abrupt("return",!1);case 16:return o=c.access.estAutorisé(a),e.abrupt("return",s&&u&&o);case 18:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"ajouterMembre",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._validerInfoMembre(t);case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return n=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var i,a,s,u,c,o,l,d=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=d.length>1&&void 0!==d[1]&&d[1],a=t.idOrbite,s=t.idBdRacine,e.next=4,Bn.acquire(a);case 4:return e.next=6,r.client.rechercherBdListe(r.idBd,(function(e){return e.payload.value.idOrbite===a}));case 6:if(u=e.sent,u){e.next=13;break}return e.next=10,r.client.ouvrirBd(r.idBd);case 10:return c=e.sent,e.next=13,c.add(t);case 13:if(r.fOublierMembres[s]||i){e.next=19;break}return o=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.forEach((function(e){return n(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=17,r.client.suivreBdListeDeClef(s,"réseau",o);case 17:l=e.sent,r.fOublierMembres[s]=l;case 19:Bn.release(a);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=7,n(t,!0);case 7:this._vu(t);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_vu",value:function(e){this.dispositifsEnLigne[e.idOrbite]={info:e,"vuÀ":(new Date).getTime()},this.emit("membreVu")}},{key:"enleverMembre",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.fOublierMembres[t](),e.next=3,this.client.ouvrirBd(this.idBd);case 3:return n=e.sent,r=n.iterator({limit:-1}).collect().find((function(e){return e.payload.value===t})),e.next=7,n.remove(r.hash);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"suivreMembres",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,s,u,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={membres:[]},r=function(){var e=n.membres.map((function(e){var t=c.dispositifsEnLigne[e.idOrbite]?c.dispositifsEnLigne[e.idOrbite].vuÀ:void 0;return Object.assign({"vuÀ":t},e)}));t(e)},i=function(e){n.membres=e,r()},e.next=5,this.client.suivreBdListe(this.idBd,i);case 5:return a=e.sent,this.on("membreVu",r),s=function(){c.off("membreVu",r)},u=function(){a(),s()},e.abrupt("return",u);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"suivreNomsMembre",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=function(e){return n(e||{})},e.next=3,this.client.suivreBdDeClef(t,"compte",r,(function(e,t){return i.client.compte.suivreNoms(t,e)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreCourrielMembre",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,i.client.compte.suivreCourriel(n,t.id);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=3,this.client.suivreBdDeClef(t,"compte",r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreImageMembre",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,i.client.compte.suivreImage(n,t.id);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=3,this.client.suivreBdDeClef(t,"compte",r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreBdsMembre",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.suivreBdDeClef(t,"bds",n,(function(e,t){return r.client.bds.suivreBds(t,e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreProjetsMembre",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.suivreBdDeClef(t,"projets",n,(function(e,t){return r.client.projets.suivreProjetsMembre(t,e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreFavorisMembre",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.suivreBdDeClef(t,"bds",n,(function(e,t){return r.client.favoris.suivreFavoris(t,e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreBds",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={propres:[],favoris:[]},i=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=Object(_t["a"])(new Set([].concat(Object(_t["a"])(r.propres),Object(_t["a"])(r.favoris)))),n(t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=4,a.suivreBdsMembre(t,(function(e){r.propres=e||[],i()}));case 4:return s=e.sent,e.next=7,a.suivreFavorisMembre(t,(function(e){r.favoris=e||[],i()}));case 7:return u=e.sent,e.abrupt("return",(function(){s(),u()}));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r=function(e){return e.idBdRacine},i=function(e){return e.idOrbite},e.next=5,this.client.suivreBdsDeBdListe(this.idBd,t,n,r,void 0,i);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"suivreRéplications",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s,u,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.suivreMembres(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(n,r,i){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=function(e){if(e){var n=e.filter((function(e){return e===t})).map((function(e){return{idBd:e,idBdRacine:i.idBdRacine,idOrbite:i.idOrbite,"vuÀ":i.vuÀ}}));return r(n)}},e.next=3,c.suivreFavorisMembre(n,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),a=function(e){return e.idBdRacine},s=function(e){return e.idOrbite},e.next=6,this.client.suivreBdsDeFonctionListe(r,n,i,a,void 0,s);case 6:return u=e.sent,e.abrupt("return",u);case 8:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),n}(St["EventEmitter"]),_n=function(){function e(t,n){Object(U["a"])(this,e),this.client=void 0,this.idBd=void 0,this.client=t,this.idBd=n}return Object(Lt["a"])(e,[{key:"suivreFavoris",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=n||this.idBd,r=function(e){t(e.map((function(e){return"string"===typeof e?e:e.id})).filter((function(e){return e})))},e.next=4,this.client.suivreBdListe(n,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"épinglerFavori",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.rechercherBdListe(this.idBd,(function(e){return e.payload.value.id===t}));case 2:if(n=e.sent,n){e.next=10;break}return e.next=6,this.client.ouvrirBd(this.idBd);case 6:return r=e.sent,i={id:t},e.next=10,r.add(i);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"désépinglerFavori",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.rechercherBdListe(this.idBd,(function(e){return e.payload.value.id===t}));case 2:if(n=e.sent,!n){e.next=9;break}return e.next=6,this.client.ouvrirBd(this.idBd);case 6:return r=e.sent,e.next=9,r.remove(n.hash);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"suivreÉtatFavori",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=function(e){n(e.map((function(e){return e.id})).includes(t))},e.next=3,this.client.suivreBdListe(this.idBd,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}(),Dn=function(){function e(t,n){Object(U["a"])(this,e),this.client=void 0,this.idBd=void 0,this.client=t,this.idBd=n,this.migrerProjets()}return Object(Lt["a"])(e,[{key:"suivreProjetsMembre",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=n||this.idBd,e.next=3,this.client.suivreBdListe(n,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"créerProjet",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a,s,u,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.ouvrirBd(this.idBd);case 2:return t=e.sent,e.next=5,this.client.créerBdIndépendante("kvstore",{adresseBd:void 0,premierMod:this.client.bdRacine.id});case 5:return n=e.sent,e.next=8,t.add(n);case 8:return e.next=10,this.client.ouvrirBd(n);case 10:return r=e.sent,i=r.access,a={adresseBd:i.adresseBd},e.next=15,this.client.créerBdIndépendante("kvstore",a);case 15:return s=e.sent,e.next=18,r.set("noms",s);case 18:return e.next=20,this.client.créerBdIndépendante("kvstore",a);case 20:return u=e.sent,e.next=23,r.set("descriptions",u);case 23:return e.next=25,this.client.créerBdIndépendante("feed",a);case 25:return c=e.sent,e.next=28,r.set("bds",c);case 28:return e.next=30,this.client.créerBdIndépendante("feed",a);case 30:return o=e.sent,e.next=33,r.set("motsClefs",o);case 33:return e.next=35,r.set("statut",{statut:gn.ACTIVE});case 35:return e.abrupt("return",n);case 36:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"copierProjet",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,s,u,c,o,l,d,p,f,h,m,v,b,g=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.ouvrirBd(t);case 2:return n=e.sent,e.next=5,this.créerProjet();case 5:return r=e.sent,e.next=8,this.client.ouvrirBd(r);case 8:return i=e.sent,e.next=11,n.get("noms");case 11:return a=e.sent,e.next=14,this.client.ouvrirBd(a);case 14:return s=e.sent,u=Tn.obtObjetdeBdDic(s),e.next=18,this.ajouterNomsProjet(r,u);case 18:return e.next=20,n.get("descriptions");case 20:return c=e.sent,e.next=23,this.client.ouvrirBd(c);case 23:return o=e.sent,l=Tn.obtObjetdeBdDic(o),e.next=27,this.ajouterDescriptionsProjet(r,l);case 27:return e.next=29,n.get("motsClefs");case 29:return d=e.sent,e.next=32,this.client.ouvrirBd(d);case 32:return p=e.sent,f=Tn.obtÉlémentsDeBdListe(p),f.forEach(function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g.ajouterMotClefProjet(r,t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=37,n.get("bds");case 37:return h=e.sent,e.next=40,this.client.ouvrirBd(h);case 40:return m=e.sent,v=Tn.obtÉlémentsDeBdListe(m),v.forEach(function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g.ajouterBdProjet(r,t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=45,n.get("statut");case 45:if(e.t0=e.sent,e.t0){e.next=48;break}e.t0=gn.ACTIVE;case 48:return b=e.t0,e.next=51,i.set("statut",{statut:b});case 51:return e.abrupt("return",r);case 52:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"migrerProjets",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.client.ouvrirBd(t);case 2:if(n=e.sent,r=n.access.constructor.type,r===Ut){e.next=11;break}return e.next=7,i.copierProjet(t);case 7:return a=e.sent,e.next=10,i.marquerObsolète(t,a);case 10:return e.abrupt("return",a);case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=3,this.client.ouvrirBd(this.idBd);case 3:n=e.sent,r=Tn.obtÉlémentsDeBdListe(n),r.forEach(function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(r){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t(r);case 2:if(i=e.sent,r===i){e.next=6;break}return e.next=6,n.add(i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_obtBdNoms",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtOpsAccès(t);case 2:return n=e.sent,e.next=5,this.client.obtIdBd("noms",t,"kvstore",n);case 5:if(r=e.sent,r){e.next=8;break}throw"Permission de modification refusée pour Projet ".concat(t,".");case 8:return e.next=10,this.client.ouvrirBd(r);case 10:return i=e.sent,e.abrupt("return",i);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"ajouterNomsProjet",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._obtBdNoms(t);case 2:r=e.sent,e.t0=regeneratorRuntime.keys(n);case 4:if((e.t1=e.t0()).done){e.next=10;break}return i=e.t1.value,e.next=8,r.set(i,n[i]);case 8:e.next=4;break;case 10:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"sauvegarderNomProjet",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n,r){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._obtBdNoms(t);case 2:return i=e.sent,e.next=5,i.set(n,r);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"effacerNomProjet",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._obtBdNoms(t);case 2:return r=e.sent,e.next=5,r.del(n);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"_obtBdDescr",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtOpsAccès(t);case 2:return n=e.sent,e.next=5,this.client.obtIdBd("descriptions",t,"kvstore",n);case 5:if(r=e.sent,r){e.next=8;break}throw"Permission de modification refusée pour Projet ".concat(t,".");case 8:return e.next=10,this.client.ouvrirBd(r);case 10:return i=e.sent,e.abrupt("return",i);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"ajouterDescriptionsProjet",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._obtBdDescr(t);case 2:r=e.sent,e.t0=regeneratorRuntime.keys(n);case 4:if((e.t1=e.t0()).done){e.next=10;break}return i=e.t1.value,e.next=8,r.set(i,n[i]);case 8:e.next=4;break;case 10:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"sauvegarderDescrProjet",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n,r){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._obtBdDescr(t);case 2:return i=e.sent,e.next=5,i.set(n,r);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"effacerDescrProjet",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._obtBdDescr(t);case 2:return r=e.sent,e.next=5,r.del(n);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"_obtBdMotsClefs",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtOpsAccès(t);case 2:return n=e.sent,e.next=5,this.client.obtIdBd("motsClefs",t,"feed",n);case 5:if(r=e.sent,r){e.next=8;break}throw"Permission de modification refusée pour Projet ".concat(t,".");case 8:return e.next=10,this.client.ouvrirBd(r);case 10:return i=e.sent,e.abrupt("return",i);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"ajouterMotClefProjet",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._obtBdMotsClefs(t);case 2:if(r=e.sent,i=Tn.obtÉlémentsDeBdListe(r),i.includes(n)){e.next=7;break}return e.next=7,r.add(n);case 7:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"_obtBdBds",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtOpsAccès(t);case 2:return n=e.sent,e.next=5,this.client.obtIdBd("bds",t,"feed",n);case 5:if(r=e.sent,r){e.next=8;break}throw"Permission de modification refusée pour Projet ".concat(t,".");case 8:return e.next=10,this.client.ouvrirBd(r);case 10:return i=e.sent,e.abrupt("return",i);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"ajouterBdProjet",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._obtBdBds(t);case 2:return r=e.sent,e.next=5,r.add(n);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"effacerBdProjet",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._obtBdBds(t);case 2:return r=e.sent,i=r.iterator({limit:-1}).collect().find((function(e){return e.payload.value===n})),e.next=6,r.remove(i.hash);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"marquerObsolète",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.ouvrirBd(t);case 2:r=e.sent,r.set("statut",{statut:gn.OBSOLÈTE,idNouveau:n});case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreNomsProjet",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.suivreBdDicDeClef(t,"noms",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreDescrProjet",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.suivreBdDicDeClef(t,"descriptions",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreBdsProjet",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.suivreBdListeDeClef(t,"bds",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreVariablesProjet",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=function(e){return n(e||[])},i=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.client.bds.suivreVariablesBd(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.client.suivreBdsDeBdListe(t,n,i);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.next=5,this.client.suivreBdDeClef(t,"bds",r,a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"effacerProjet",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.ouvrirBd(this.idBd);case 2:return n=e.sent,r=n.iterator({limit:-1}).collect().find((function(e){return e.payload.value===t})),e.next=6,n.remove(r.hash);case 6:return e.next=8,this.client.obtOpsAccès(t);case 8:i=e.sent,e.t0=regeneratorRuntime.keys(["noms","descriptions","motsClefs","bds"]);case 10:if((e.t1=e.t0()).done){e.next=20;break}return a=e.t1.value,e.next=14,this.client.obtIdBd(a,t,void 0,i);case 14:if(s=e.sent,!s){e.next=18;break}return e.next=18,this.client.effacerBd(s);case 18:e.next=10;break;case 20:return e.next=22,this.client.effacerBd(t);case 22:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),In=function(){function e(t,n){Object(U["a"])(this,e),this.client=void 0,this.idBd=void 0,this.client=t,this.idBd=n}return Object(Lt["a"])(e,[{key:"suivreMotsClefs",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.suivreBdListe(this.idBd,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"créerMotClef",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.ouvrirBd(this.idBd);case 2:return t=e.sent,e.next=5,this.client.créerBdIndépendante("kvstore",{adresseBd:void 0,premierMod:this.client.bdRacine.id});case 5:return n=e.sent,e.next=8,t.add(n);case 8:return e.next=10,this.client.ouvrirBd(n);case 10:return r=e.sent,i=r.access,a={adresseBd:i.adresseBd},e.next=15,this.client.créerBdIndépendante("kvstore",a);case 15:return s=e.sent,e.next=18,r.set("noms",s);case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"copierMotClef",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.ouvrirBd(t);case 2:return n=e.sent,e.next=5,this.créerMotClef();case 5:return r=e.sent,e.next=8,n.get("noms");case 8:return i=e.sent,e.next=11,this.client.ouvrirBd(i);case 11:return a=e.sent,s=Tn.obtObjetdeBdDic(a),e.next=15,this.ajouterNomsMotClef(r,s);case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"ajouterNomsMotClef",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtIdBd("noms",t,"kvstore");case 2:if(r=e.sent,r){e.next=5;break}throw"Permission de modification refusée pour mot clef ".concat(t,".");case 5:return e.next=7,this.client.ouvrirBd(r);case 7:i=e.sent,e.t0=regeneratorRuntime.keys(n);case 9:if((e.t1=e.t0()).done){e.next=15;break}return a=e.t1.value,e.next=13,i.set(a,n[a]);case 13:e.next=9;break;case 15:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"sauvegarderNomMotClef",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n,r){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtIdBd("noms",t,"kvstore");case 2:if(i=e.sent,i){e.next=5;break}throw"Permission de modification refusée pour mot clef ".concat(t,".");case 5:return e.next=7,this.client.ouvrirBd(i);case 7:return a=e.sent,e.next=10,a.set(n,r);case 10:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"effacerNomMotClef",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.obtIdBd("noms",t,"kvstore");case 2:if(r=e.sent,r){e.next=5;break}throw"Permission de modification refusée pour mot clef ".concat(t,".");case 5:return e.next=7,this.client.ouvrirBd(r);case 7:return i=e.sent,e.next=10,i.del(n);case 10:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreNomsMotClef",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.suivreBdDicDeClef(t,"noms",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"effacerMotClef",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.ouvrirBd(this.idBd);case 2:return n=e.sent,r=n.iterator({limit:-1}).collect().find((function(e){return e.payload.value===t})),e.next=6,n.remove(r.hash);case 6:return e.next=8,this.client.effacerBd(t);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),Ln=(n("a15b"),n("4749")),An=n.n(Ln),Sn=n("1c46"),Pn=n.n(Sn),Mn=new TextDecoder("utf-8"),En=function(){function e(t){var n=this;Object(U["a"])(this,e),this.client=void 0,this.sujet=void 0,this.nuée=void 0,this.client=t,this.sujet=Pn.a.createHash("sha256").update("réseau-constellation").digest(),this.nuée=An()(),this.nuée.join(this.sujet,{lookup:!0,announce:!0}),this.nuée.on("connection",function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.on("data",(function(e){return n.gérerDonnées(e,t)})),setInterval((function(){return n.direSalut(t)}),6e4),n.direSalut(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}return Object(Lt["a"])(e,[{key:"direSalut",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={type:"Salut !",contenu:{idSFIP:this.client.idNodeSFIP.id,idOrbite:this.client.orbite.identity.id,clefPublique:this.client.orbite.identity.publicKey,signatures:this.client.orbite.identity.signatures,idBdRacine:this.client.bdRacine.id}},e.next=3,this.client.signer(JSON.stringify(n));case 3:r=e.sent,i={signature:r,valeur:n},t.write(JSON.stringify(i));case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"gérerDonnées",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s,u,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(Mn.decode(t)),i=r.valeur,a=r.signature,e.next=4,this.client.vérifierSignature(a,JSON.stringify(i));case 4:if(s=e.sent,s){e.next=7;break}return e.abrupt("return");case 7:e.t0=i.type,e.next="Salut !"===e.t0?10:15;break;case 10:if(u=i.contenu,c=u.clefPublique,c===a.clefPublique){e.next=14;break}return e.abrupt("return");case 14:this.client.réseau.ajouterMembre(u);case 15:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}();function Nn(e){return new ReadableStream({pull:function(t){return Object(It["a"])(regeneratorRuntime.mark((function n(){var r,i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.next();case 2:r=n.sent,i=r.value,a=r.done,a?t.close():t.enqueue(i);case 6:case"end":return n.stop()}}),n)})))()}})}function zn(e,t){var n,r,i,a,s,u,c,o;return regeneratorRuntime.async((function(l){while(1)switch(l.prev=l.next){case 0:n=new Uint8Array(0),r=!0,i=!1,l.prev=3,s=Object(At["a"])(e);case 5:return l.next=7,regeneratorRuntime.awrap(s.next());case 7:return u=l.sent,r=u.done,l.next=11,regeneratorRuntime.awrap(u.value);case 11:if(c=l.sent,r){l.next=20;break}if(o=c,n=hn()([n,o],n.length+o.length),!(void 0!==t&&n.length>t)){l.next=17;break}return l.abrupt("return",null);case 17:r=!0,l.next=5;break;case 20:l.next=26;break;case 22:l.prev=22,l.t0=l["catch"](3),i=!0,a=l.t0;case 26:if(l.prev=26,l.prev=27,r||null==s.return){l.next=31;break}return l.next=31,regeneratorRuntime.awrap(s.return());case 31:if(l.prev=31,!i){l.next=34;break}throw a;case 34:return l.finish(31);case 35:return l.finish(26);case 36:return l.abrupt("return",n);case 37:case"end":return l.stop()}}),null,null,[[3,22,26,36],[27,,31,35]],Promise)}var Vn=new Mt["a"];function qn(e){return"string"===typeof e&&e.startsWith("/orbitdb/")&&Object(Et["isValidAddress"])(e)}var Tn=function(e){Object(J["a"])(n,e);var t=Object(G["a"])(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"./sfip-cnstl";return Object(U["a"])(this,n),e=t.call(this),e._dir=void 0,e.optionsAccès=void 0,e.bdRacine=void 0,e._bds=void 0,e.orbite=void 0,e.sfip=void 0,e.idNodeSFIP=void 0,e.compte=void 0,e.bds=void 0,e.tableaux=void 0,e.variables=void 0,e.réseau=void 0,e.favoris=void 0,e.projets=void 0,e.nuée=void 0,e.motsClefs=void 0,e.pret=void 0,e._dir=r,e._bds={},e.pret=!1,e}return Object(Lt["a"])(n,[{key:"initialiser",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a,s,u,c,o,l,d,p,f,h=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,dn(this._dir);case 2:return this.sfip=e.sent,e.next=5,this.sfip.id();case 5:for(this.idNodeSFIP=e.sent,t=0,n=["peer:connect","peer:disconnect"];t<n.length;t++)r=n[t],this.sfip.libp2p.connectionManager.on(r,(function(){h.emit("changementConnexions")}));return e.next=9,Xt(this.sfip);case 9:return this.orbite=e.sent,i={type:"controlleur-constellation",premierMod:this.orbite.identity.id,nom:"racine"},e.next=13,this.créerBdIndépendante("kvstore",i,"racine");case 13:return a=e.sent,e.next=16,this.ouvrirBd(a);case 16:return this.bdRacine=e.sent,e.next=19,this.bdRacine.load();case 19:return s=this.bdRacine.access,this.optionsAccès={type:"controlleur-constellation",adresseBd:s.bd.address},e.next=23,this.obtIdBd("compte",this.bdRacine,"kvstore");case 23:return u=e.sent,this.compte=new bn(this,u),e.next=27,this.obtIdBd("bds",this.bdRacine,"feed");case 27:return c=e.sent,this.bds=new xn(this,c),this.tableaux=new Rn(this),e.next=32,this.obtIdBd("variables",this.bdRacine,"feed");case 32:return o=e.sent,this.variables=new jn(this,o),e.next=36,this.obtIdBd("réseau",this.bdRacine,"feed");case 36:return l=e.sent,this.réseau=new Cn(this,l),e.next=40,this.obtIdBd("favoris",this.bdRacine,"feed");case 40:return d=e.sent,this.favoris=new _n(this,d),e.next=44,this.obtIdBd("projets",this.bdRacine,"feed");case 44:return p=e.sent,this.projets=new Dn(this,p),e.next=48,this.obtIdBd("motsClefs",this.bdRacine,"feed");case 48:return f=e.sent,this.motsClefs=new In(this,f),this.nuée=new En(this),this.pret=!0,this.emit("pret"),e.next=55,this.épinglerBd(a);case 55:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"signer",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.orbite.identity,e.next=3,this.orbite.identity.provider.sign(n,t);case 3:return r=e.sent,i=this.orbite.identity.publicKey,e.abrupt("return",{signature:r,clefPublique:i});case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"vérifierSignature",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.orbite.identity.provider.verify(t.signature,t.clefPublique,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreConnexionsPostes",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=function(e){var t,n=[],r=[],i=Object(Dt["a"])(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.includes(a.addr.toString())||(n.push(a.addr.toString()),r.push(a))}}catch(s){i.e(s)}finally{i.f()}return r},r=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.sfip.swarm.peers();case 2:r=e.sent,i=n(r),t(i);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),this.on("changementConnexions",r),r(),i=function(){a.off("changementConnexions",r)},e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"suivreDispositifs",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.bdRacine){e.next=3;break}return e.next=3,Object(St["once"])(this,"pret");case 3:return n=n||this.bdRacine.id,e.next=6,this.ouvrirBd(n);case 6:if(r=e.sent,i=r.access,a=function(){},s=i.constructor.type,"ipfs"!==s){e.next=15;break}return t(i.write),e.abrupt("return",a);case 15:if("controlleur-constellation"!==s){e.next=22;break}return u=function(){var e=i.rôles[Ft["b"]];t(e)},i.on("updated",u),u(),e.abrupt("return",(function(){i.off("updated",u)}));case 22:return e.abrupt("return",a);case 23:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"ajouterDispositif",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.bdRacine){e.next=3;break}return e.next=3,Object(St["once"])(this,"pret");case 3:n=this.bdRacine.access,n.grant(Ft["b"],t);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"enleverDispositif",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.bdRacine){e.next=3;break}return e.next=3,Object(St["once"])(this,"pret");case 3:return n=this.bdRacine.access,e.next=6,n.revoke(Ft["b"],t);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"rejoindreCompte",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.error("Non implémenté");case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"donnerAccès",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.ouvrirBd(t);case 2:r=e.sent,i=r.access,a=i.constructor.type,a===Ut&&i.grant(Ft["a"],n);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreAccès",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.ouvrirBd(t);case 2:return r=e.sent,i=r.access,a=function(){var e=i.rôles;n(e)},i.on("updated",a),e.abrupt("return",(function(){i.off("updated",a)}));case 7:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"copierContenuBdListe",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,r,i){var a,s,u,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.get(i);case 2:if(a=e.sent,a){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.ouvrirBd(a);case 7:return s=e.sent,e.next=10,r.get(i);case 10:if(u=e.sent,u){e.next=13;break}throw"La nouvelle Bd n'existait pas";case 13:return e.next=15,this.ouvrirBd(u);case 15:c=e.sent,o=n.obtÉlémentsDeBdListe(s),o.forEach(function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.add(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 18:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"suivreBd",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s,u,c,o,l=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:["write","replicate","replicated","ready"],e.next=3,this.ouvrirBd(t);case 3:i=e.sent,a=function(){return n(i)},s=Object(Dt["a"])(r);try{for(s.s();!(u=s.n()).done;)c=u.value,i.events.on(c,a)}catch(d){s.e(d)}finally{s.f()}return a(),o=function(){r.forEach((function(e){i.events.off(e,a)}))},e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"suivreBdDeClef",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n,r,i){var a,s,u,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i||(i=function(e,t){return c.suivreBd(e,t)}),e.next=3,this.suivreBd(t,function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.get(n);case 2:if(u=e.sent,u===s){e.next=14;break}if(s=u,a&&a(),!s){e.next=12;break}return e.next=9,i(s,r);case 9:a=e.sent,e.next=14;break;case 12:r(void 0),a=void 0;case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return u=e.sent,e.abrupt("return",(function(){u(),a&&a()}));case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"suivreBdDicDeClef",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,r,i){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t?n.obtObjetdeBdDic(t):{},i(r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=3,this.suivreBdDeClef(t,r,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"suivreBdListeDeClef",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,r,i){var a,s,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=!(u.length>3&&void 0!==u[3])||u[3],s=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t?n.obtÉlémentsDeBdListe(t,a):[],i(r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=4,this.suivreBdDeClef(t,r,s);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"suivreBdListe",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,r){var i,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=!(a.length>2&&void 0!==a[2])||a[2],e.next=3,this.suivreBd(t,function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=n.obtÉlémentsDeBdListe(t,i),r(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"obtÉlémentBdListeSelonEmpreinte",value:function(e,t){return e.iterator({limit:-1}).collect().find((function(e){return e.hash===t})).payload.value}},{key:"suivreBdsDeBdListe",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n,r){var i,a,s,u,c=this,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=o.length>3&&void 0!==o[3]?o[3]:function(e){return e},a=o.length>4&&void 0!==o[4]?o[4]:function(e){return Object(_t["a"])(new Set(e.flat()))},s=o.length>5&&void 0!==o[5]?o[5]:function(e){return e},u=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.suivreBdListe(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=6,this.suivreBdsDeFonctionListe(u,n,r,i,a,s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"suivreBdsDeFonctionListe",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n,r){var i,a,s,u,c,o,l,d,p,f=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=f.length>3&&void 0!==f[3]?f[3]:function(e){return e},a=f.length>4&&void 0!==f[4]?f[4]:function(e){return Object(_t["a"])(new Set(e.flat()))},s=f.length>5&&void 0!==f[5]?f[5]:function(e){return e},u={},c={},o=function(){var e=Object.values(u).map((function(e){return e.données})).filter((function(e){return void 0!==e})),t=a(e);n(t)},l=function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,a,l,d,p,f,h,m,v,b,g,x,w;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.some((function(e){return"string"!==typeof s(e)}))){e.next=2;break}throw"Définir fCode si les éléments ne sont pas en format texte (chaînes).";case 2:n=Object.fromEntries(t.map((function(e){return[s(e),e]}))),a=Object.keys(u),l=Object.keys(n).filter((function(e){return!a.includes(e)})),d=a.filter((function(e){return!Object.keys(n).includes(e)})),p=Object.entries(n).filter((function(e){return c[e[0]]!==e[1]})).map((function(e){return e[0]})),l.push.apply(l,Object(_t["a"])(p)),f=Object(Dt["a"])(p);try{for(f.s();!(h=f.n()).done;)m=h.value,u[m]&&(v=u[m].fOublier,v&&v(),delete u[m])}catch(k){f.e(k)}finally{f.f()}b=Object(Dt["a"])(d);try{for(b.s();!(g=b.n()).done;)x=g.value,w=u[x].fOublier,w&&w(),delete u[x],o()}catch(k){b.e(k)}finally{b.f()}l.map(function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var a,s,l,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u[t]={"données":void 0},a=n[t],c[t]=a,s=i(a),l=function(e){u[t].données=e,o()},e.next=7,r(s,l,a);case 7:d=e.sent,u[t].fOublier=d;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o(),e.next=10,t(l);case 10:return d=e.sent,p=function(){d(),Object.values(u).map((function(e){return e.fOublier?e.fOublier():null}))},e.abrupt("return",p);case 13:case"end":return e.stop()}}),e)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"rechercherBdListe",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.ouvrirBd(t);case 2:return r=e.sent,i=r.iterator({limit:-1}).collect().find((function(e){return n(e)})),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"obtFichierSFIP",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,zn(this.sfip.cat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"obtFluxSFIP",value:function(e){var t=this.sfip.cat(e),n=Nn(t);return n}},{key:"ajouterÀSFIP",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.sfip.add(t);case 2:return n=e.sent,e.abrupt("return",n.cid.toString());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"ouvrirBd",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(qn(t)){e.next=2;break}throw new Error("Adresse ".concat(t," non valide."));case 2:return e.next=4,Vn.acquire(t);case 4:if(n=this._bds[t],!n){e.next=8;break}return Vn.release(t),e.abrupt("return",n);case 8:return e.next=10,this.orbite.open(t);case 10:return r=e.sent,e.next=13,r.load();case 13:return this._bds[t]=r,Vn.release(t),e.abrupt("return",r);case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"obtIdBd",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n,r,i){var a,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"!==typeof n){e.next=6;break}return e.next=3,this.ouvrirBd(n);case 3:a=e.sent,e.next=7;break;case 6:a=n;case 7:return e.next=9,a.get(t);case 9:if(s=e.sent,!s||!r){e.next=20;break}return e.prev=11,e.next=14,this.orbite[r](s);case 14:return e.abrupt("return",s);case 17:e.prev=17,e.t0=e["catch"](11),s=void 0;case 20:return e.next=22,this.permissionÉcrire(a.id);case 22:if(u=e.sent,s||!u||!r){e.next=29;break}return e.next=26,this.créerBdIndépendante(r,i);case 26:return s=e.sent,e.next=29,a.set(t,s);case 29:return e.abrupt("return",s);case 30:case"end":return e.stop()}}),e,this,[[11,17]])})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"créerBdIndépendante",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n,r){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object.assign({},this.optionsAccès,n||{}),i={accessController:n},e.next=4,this.orbite[t](r||Object(Pt["v4"])(),i);case 4:return a=e.sent,e.next=7,a.load();case 7:return e.abrupt("return",a.id);case 8:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"_générerBd",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!qn(n)||!this._bds[n]){e.next=2;break}return e.abrupt("return",this._bds[n]);case 2:return e.next=4,this.orbite[t](n);case 4:return r=e.sent,this._bds[r.id]=r,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"effacerBd",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.orbite.open(t);case 2:return n=e.sent,e.next=5,n.drop();case 5:delete this._bds[t];case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"obtOpsAccès",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.ouvrirBd(t);case 2:return n=e.sent,r=n.access,e.abrupt("return",{adresseBd:r.bd.address});case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"permissionÉcrire",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.orbite.identity.id,e.next=3,this.ouvrirBd(t);case 3:if(r=e.sent,i=r.access,a=i.constructor.type,"ipfs"!==a){e.next=10;break}return e.abrupt("return",i.write.includes(n));case 10:if(a!==Ut){e.next=12;break}return e.abrupt("return",i.estAutorisé(n));case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"suivreAccèsBd",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s,u,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.ouvrirBd(t);case 2:if(r=e.sent,i=r.access,a=i.constructor.type,s=function(){},"ipfs"!==a){e.next=11;break}u=i.write.map((function(e){return{idBdRacine:e,"rôle":Ft["b"]}})),n(u),e.next=16;break;case 11:if(a!==Ut){e.next=16;break}return e.next=14,i.suivreUtilisateursAutorisés(n);case 14:return c=e.sent,e.abrupt("return",c);case 16:return e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"épinglerBd",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(t){var r,i,a,s,u,c,o=this,l=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:[],!r.includes(t)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.ouvrirBd(t);case 5:i=e.sent,r.push(t),a=function(e){qn(e)&&o.épinglerBd(e,r)},s=function(e){"object"===Object(Ct["a"])(e)?Object.values(e).forEach((function(e){return a(e)})):Array.isArray(e)?e.forEach((function(e){return a(e)})):a(e)},"keyvalue"===i.type?(u=Object.values(n.obtObjetdeBdDic(i)),u.forEach(s)):"feed"===i.type&&(c=n.obtÉlémentsDeBdListe(i),c.forEach(s));case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}],[{key:"obtObjetdeBdDic",value:function(e){var t=e.all;return Object.fromEntries(Object.keys(t).map((function(e){return[e,t[e]]})))}},{key:"obtÉlémentsDeBdListe",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.iterator({limit:-1}).collect().map((function(e){return t?e.payload.value:e}))}},{key:"créer",value:function(){var e=Object(It["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new n,e.next=3,t.initialiser();case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(St["EventEmitter"]),$n={install:function(e){e.prototype.$ipa=new Tn,e.prototype.$ipa.initialiser()}};r["a"].config.productionTip=!1,r["a"].use($n),r["a"].use(Ot["a"]),new r["a"]({router:Oe,store:Se,vuetify:Bt,i18n:Rt,render:function(e){return e(V)}}).$mount("#app")},d257:function(e,t,n){"use strict";n.d(t,"d",(function(){return v})),n.d(t,"g",(function(){return b})),n.d(t,"f",(function(){return g})),n.d(t,"b",(function(){return w})),n.d(t,"i",(function(){return k})),n.d(t,"h",(function(){return y})),n.d(t,"c",(function(){return R})),n.d(t,"e",(function(){return j})),n.d(t,"a",(function(){return B}));var r=n("1da1"),i=n("53ca"),a=n("b85c"),s=(n("96cf"),n("99af"),n("fb6a"),n("d81d"),n("07ac"),n("7db0"),n("b64b"),n("d3b7"),n("3ca3"),n("ddb0"),n("63a6")),u=n.n(s),c=n("c0c4"),o=n.n(c),l=n("0e54"),d=n.n(l),p=n("3717"),f=n.n(p),h=n("62a9"),m=n("11b3");function v(e,t){return e.length<=t?e:e.slice(0,t-3).concat("...")}function b(e,t){var n,r,s=Object(a["a"])(t);try{for(s.s();!(r=s.n()).done;){var u=r.value;if(n=e[u],n)return n}}catch(f){s.e(f)}finally{s.f()}var c,o=t.map((function(e){return{"écriture":Object(m["rutzibChabäl"])(e),langue:e}})),l=Object(a["a"])(o);try{var d=function(){var t=c.value,n=(t.langue,t.écriture),r=Object.keys(e).find((function(e){return Object(m["rutzibChabäl"])(e)===n}));if(r)return{v:e[r]}};for(l.s();!(c=l.n()).done;){var p=d();if("object"===Object(i["a"])(p))return p.v}}catch(f){l.e(f)}finally{l.f()}return Object.values(e)[0]}function g(e){return x.apply(this,arguments)}function x(){return x=Object(r["a"])(regeneratorRuntime.mark((function e(t){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!u()()){e.next=8;break}return e.next=3,n.e("chunk-ca0a3aa0").then(n.t.bind(null,"bdb9",7));case 3:r=e.sent,i=r.shell,i.openExternal(t),e.next=9;break;case 8:window.open(t,"_newtab");case 9:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function w(e){return o.a.sanitize(d()(e))}function k(e,t){var n=document.createElement("a");n.download=t,n.href=e,n.click()}function y(e,t){console.log({fluxLecture:e});var n=f.a.createWriteStream(t);if(window.WritableStream&&e.pipeTo)return e.pipeTo(n);var r=n.getWriter();r.write(),r.close();var i=e.getReader(),a=function e(){return i.read().then((function(t){return t.done?r.close():r.write(t.value).then(e)}))};a()}function R(e){return null===e?{couleur:"#666666",note:"?"}:e>=95?{couleur:"#1e7145",note:"A"}:e>=90?{couleur:"#00a300",note:"A-"}:e>=85?{couleur:"#99b433",note:"B"}:e>=80?{couleur:"#ffc40d",note:"B-"}:e>=70?{couleur:"#e3a21a",note:"C+"}:e>=60?{couleur:"#da532c",note:"C"}:e>=55?{couleur:"#ee1111",note:"D"}:{couleur:"#b91d47",note:"F"}}function j(e){switch(e){case"numérique":return"mdi-numeric";case"chaîne":return"mdi-text-short";case"catégorique":return"mdi-view-list";case"booléen":return"mdi-order-bool-ascending-variant";case"géojson":return"mdi-map-marker";case"fichier":return"mdi-file";case"vidéo":return"mdi-play-box-outline";case"audio":return"mdi-waveform";case"photo":return"mdi-image";case"date":return"mdi-calendar-month-outline";case"heure":return"mdi-clock-time-four-outline";case"dateEtHeure":return"mdi-calendar-clock";default:return""}}f.a.WritableStream=h["a"];var B=["numérique","date","heure","dateEtHeure","chaîne","catégorique","booléen","géojson","vidéo","audio","photo","fichier"]},daab:function(e,t,n){e.exports=n.p+"img/undraw_Terms_re_6ak4.861f27a1.svg"},dbc1:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a}));var r="MODÉRATEUR",i="MEMBRE",a=[r,i]}});